

---
title: 更换,配置腾讯云服务器
categories:
  - 杂七杂八配置
tags:
  - 搭建博客
toc: true# 是否启用内容索引
---
`阿里服务器到期了,续费too expensive,改用腾讯与的新用户,188一年2核4G`

## 服务器相关(买完服务器之后步骤)

### 1.改用root连接

1. 在腾讯云服务器控制台中,修改实例密码
2. 用ssh连接

```shell
ssh ubuntu@ip 
输入你的密码


```

3. ssh连接上之后

```shell
sudo passwd root
输入root密码
重复一遍
sudo vi /etc/ssh/sshd_config
把PermitRootLogin 改为 yes
(按i 进入Insert模式 然后修改  按ese退出编辑模型  :wq 退出)
```

4. 然后就可以用ssh root@ip进行连接了

### 2.安装nginx(方面后面设置访问的根目录)

1. 安装

```shell
sudo apt update
sudo apt install nginx
sudo systemctl status nginx
```

2. 修改配置文件

```shell
/etc/nginx/sites-enabled/default
修改配置文件

server {
    # 端口
	listen	80;
	listen [::]:80;
    # 域名
	server_name 域名;
    # 这个域名访问的路径
	location / {
		root index.html的完整路径;
		index index.html;
	}
}

3. 重启nginx
service nginx restart
```

### 3.安装conda(不用python可以跳过)

1. 官网下载conda安装包
2. ssh传到服务器(vscode直接拖进去)
3. 进入到自己的文件夹(合理有序创建文件夹)
4. bash 安装包名字
5. 配置环境变量

```shell
# 两种方式,上面一种对我没用,下面有用
1. /home/../.bashrc
export PATH=..../bin:$PATH
source ~/.bashrc

2. /etc/profile
source /etc/profile
```

6. conda -V 不是command not found就行

### 4.运行python文件

```bash
1. 
nohup python appcopy.py >appcopy.log 2>&1 &

解释:2>&1 &

0 代表STDIN_FILENO 标准输入（一般是键盘），
1 代表STDOUT_FILENO 标准输出（一般是显示屏，准确的说是用户终端控制台），
2 三代表STDERR_FILENO (标准错误（出错信息输出）。


> 直接把内容生成到指定文件，会覆盖原来文件中的内容[ls > test.txt],
>> 尾部追加，不会覆盖原有内容 [ls >> test.txt],
< 将指定文件的内容作为前面命令的参数[cat < text.sh]

2>&1就是用来将标准错误2重定向到标准输出1中的。此处1前面的&就是为了让bash将1解释成标准输出而不是文件1。至于最后一个&，则是让bash在后台执行。

2. 第一步会给一个进程ip
ps aux 查看所有进程

3. 查看输出内容
cat  appcopy.log 


4.关闭进程

kill -9 进程编号
kill -KILL 进程编号

```

## 域名相关(更换域名与之前ip的绑定)

在腾讯云域名解析页面
把之前域名绑定的ip换成现在的ip即可
但是现在的服务器要有相应的网页
