<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>python标准库-1 | Gladdduck</title>
  <meta name="description" content="12# help()函数查看# https:&#x2F;&#x2F;learnku.com&#x2F;docs&#x2F;pymotw&#x2F;date-and-time&#x2F;3380  文本处理  string 1234567891011121314151617181920212223import string# 文本常量,格式化,模板print(string.ascii_letters)print(string.printable )print">
<meta property="og:type" content="article">
<meta property="og:title" content="python标准库-1">
<meta property="og:url" content="https://gladdduck.github.io/2023/03/30/python3lib-1/index.html">
<meta property="og:site_name" content="Gladdduck">
<meta property="og:description" content="12# help()函数查看# https:&#x2F;&#x2F;learnku.com&#x2F;docs&#x2F;pymotw&#x2F;date-and-time&#x2F;3380  文本处理  string 1234567891011121314151617181920212223import string# 文本常量,格式化,模板print(string.ascii_letters)print(string.printable )print">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-03-30T05:59:34.925Z">
<meta property="article:modified_time" content="2023-04-02T03:25:27.941Z">
<meta property="article:author" content="syxue">
<meta property="article:tag" content="python3 标准库">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="https://gladdduck.github.io/2023/03/30/python3lib-1/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Gladdduck" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css">
  
<meta name="generator" content="Hexo 5.4.2"></head>


<body class="main-center theme-green" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/gladdduck" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">gladdduck</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md"></h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> SuZhou, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/gladdduck" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>分享所思所见所想,欢迎留言交流!6666</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/">hexo博客配置</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/">快捷命令</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E9%85%8D%E7%BD%AE/">杂七杂八配置</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blazor/" rel="tag">Blazor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blazor-Localization/" rel="tag">Blazor Localization</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cypher%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">Cypher学习笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dataloader/" rel="tag">Dataloader</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dataset/" rel="tag">Dataset</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFT/" rel="tag">FFT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git-%E9%87%8D%E8%A6%81/" rel="tag">Git 重要</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" rel="tag">Linux快捷命令</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Neo4j%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" rel="tag">Neo4j快捷命令</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">Python学习笔记</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sampler/" rel="tag">Sampler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vscode%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">Vscode连接阿里云服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collate-fn/" rel="tag">collate_fn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git-Time-out/" rel="tag">git Time out</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github-Time-out/" rel="tag">github Time out</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEgitalk/" rel="tag">hexo博客配置gitalk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpicgo/" rel="tag">hexo博客配置picgo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpure/" rel="tag">hexo博客配置pure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/neo4j%E5%AE%89%E8%A3%85/" rel="tag">neo4j安装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python3-%E6%A0%87%E5%87%86%E5%BA%93/" rel="tag">python3 标准库</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AE%BA%E6%96%87/" rel="tag">垃圾分类论文</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">多个域名访问同一个服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E9%A1%B9%E5%BC%8F%E4%B9%98%E6%B3%95/" rel="tag">多项式乘法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/" rel="tag">快速傅里叶变换</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">排序算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" rel="tag">搭建博客</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E8%A1%A8%E7%A4%BA/" rel="tag">知识图谱表示</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">算法刷题笔记</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%BC%E8%BF%B0/" rel="tag">综述</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">蓝桥杯 算法刷题笔记</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Blazor/" style="font-size: 13px;">Blazor</a> <a href="/tags/Blazor-Localization/" style="font-size: 13px;">Blazor Localization</a> <a href="/tags/Cypher%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 13px;">Cypher学习笔记</a> <a href="/tags/Dataloader/" style="font-size: 13px;">Dataloader</a> <a href="/tags/Dataset/" style="font-size: 13px;">Dataset</a> <a href="/tags/FFT/" style="font-size: 13px;">FFT</a> <a href="/tags/Git-%E9%87%8D%E8%A6%81/" style="font-size: 13px;">Git 重要</a> <a href="/tags/Linux%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" style="font-size: 13px;">Linux快捷命令</a> <a href="/tags/Neo4j%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" style="font-size: 13px;">Neo4j快捷命令</a> <a href="/tags/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 13.5px;">Python学习笔记</a> <a href="/tags/Sampler/" style="font-size: 13px;">Sampler</a> <a href="/tags/Vscode%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 13px;">Vscode连接阿里云服务器</a> <a href="/tags/collate-fn/" style="font-size: 13px;">collate_fn</a> <a href="/tags/git-Time-out/" style="font-size: 13px;">git Time out</a> <a href="/tags/github-Time-out/" style="font-size: 13px;">github Time out</a> <a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEgitalk/" style="font-size: 13px;">hexo博客配置gitalk</a> <a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpicgo/" style="font-size: 13px;">hexo博客配置picgo</a> <a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpure/" style="font-size: 13px;">hexo博客配置pure</a> <a href="/tags/neo4j%E5%AE%89%E8%A3%85/" style="font-size: 13px;">neo4j安装</a> <a href="/tags/python3-%E6%A0%87%E5%87%86%E5%BA%93/" style="font-size: 13.5px;">python3 标准库</a> <a href="/tags/%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB%E8%AE%BA%E6%96%87/" style="font-size: 13px;">垃圾分类论文</a> <a href="/tags/%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 13px;">多个域名访问同一个服务器</a> <a href="/tags/%E5%A4%9A%E9%A1%B9%E5%BC%8F%E4%B9%98%E6%B3%95/" style="font-size: 13px;">多项式乘法</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 13px;">快捷键</a> <a href="/tags/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/" style="font-size: 13px;">快速傅里叶变换</a> <a href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" style="font-size: 13px;">排序算法</a> <a href="/tags/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" style="font-size: 13px;">搭建博客</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E8%A1%A8%E7%A4%BA/" style="font-size: 13px;">知识图谱表示</a> <a href="/tags/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" style="font-size: 14px;">算法刷题笔记</a> <a href="/tags/%E7%BB%BC%E8%BF%B0/" style="font-size: 13px;">综述</a> <a href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF-%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" style="font-size: 13px;">蓝桥杯 算法刷题笔记</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/2023/10/21/%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2023/10/21/%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93/" class="title">(no title)</a>
              </p>
              <p class="item-date">
                <time datetime="2023-10-21T05:40:02.230Z" itemprop="datePublished">2023-10-21</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/10/09/Blazor%E4%B8%AD%E7%9A%84Localization/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
              </p>
              <p class="item-title">
                <a href="/2023/10/09/Blazor%E4%B8%AD%E7%9A%84Localization/" class="title">Blazor中的Localization</a>
              </p>
              <p class="item-date">
                <time datetime="2023-10-09T11:38:30.993Z" itemprop="datePublished">2023-10-09</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/09/16/C#-Blazor%E7%AC%94%E8%AE%B0/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
              </p>
              <p class="item-title">
                <a href="/2023/09/16/C#-Blazor%E7%AC%94%E8%AE%B0/" class="title">Blazor学习笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2023-09-16T05:56:55.560Z" itemprop="datePublished">2023-09-16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/09/09/Git/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
              </p>
              <p class="item-title">
                <a href="/2023/09/09/Git/" class="title">Git学习笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2023-09-09T02:24:47.503Z" itemprop="datePublished">2023-09-09</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/06/04/AcWing%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE,/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
              </p>
              <p class="item-title">
                <a href="/2023/06/04/AcWing%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE,/" class="title">AcWing算法基础课</a>
              </p>
              <p class="item-date">
                <time datetime="2023-06-04T14:26:33.383Z" itemprop="datePublished">2023-06-04</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
  <aside class="sidebar sidebar-toc collapse   in  " id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text"> 文本处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#string"><span class="toc-number">1.1.</span> <span class="toc-text"> string</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#textwrap"><span class="toc-number">1.2.</span> <span class="toc-text"> textwrap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#re"><span class="toc-number">1.3.</span> <span class="toc-text"> re</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#difflib"><span class="toc-number">1.4.</span> <span class="toc-text"> difflib</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text"> 数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#enum"><span class="toc-number">2.1.</span> <span class="toc-text"> enum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collection"><span class="toc-number">2.2.</span> <span class="toc-text"> collection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#chainmap"><span class="toc-number">2.2.1.</span> <span class="toc-text"> ChainMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#counter"><span class="toc-number">2.2.2.</span> <span class="toc-text"> Counter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#defaultdict"><span class="toc-number">2.2.3.</span> <span class="toc-text"> defaultdict</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deque"><span class="toc-number">2.2.4.</span> <span class="toc-text"> deque</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#namedtuple"><span class="toc-number">2.2.5.</span> <span class="toc-text"> namedtuple</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ordereddict"><span class="toc-number">2.2.6.</span> <span class="toc-text"> OrderedDict</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#collectionsabc"><span class="toc-number">2.2.7.</span> <span class="toc-text"> collections.abc</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#array%E6%95%B0%E7%BB%84"><span class="toc-number">2.3.</span> <span class="toc-text"> array数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#heapq"><span class="toc-number">2.4.</span> <span class="toc-text"> heapq</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bisect"><span class="toc-number">2.5.</span> <span class="toc-text"> bisect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#queue"><span class="toc-number">2.6.</span> <span class="toc-text"> queue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#struct%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">2.7.</span> <span class="toc-text"> struct:二进制数据结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#weakref%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%9D%9E%E6%B0%B8%E4%B9%85%E5%BC%95%E7%94%A8"><span class="toc-number">2.8.</span> <span class="toc-text"> weakref:对象的非永久引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#copy"><span class="toc-number">2.9.</span> <span class="toc-text"> copy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pprint"><span class="toc-number">2.10.</span> <span class="toc-text"> pprint</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text"> 算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#functools%E7%AE%A1%E7%90%86%E5%87%BD%E6%95%B0%E7%9A%84%E5%B7%A5%E5%85%B7"><span class="toc-number">3.1.</span> <span class="toc-text"> functools:管理函数的工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#partial"><span class="toc-number">3.1.1.</span> <span class="toc-text"> partial</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%8C%E6%AF%94%E8%BE%83"><span class="toc-number">3.1.2.</span> <span class="toc-text"> 富比较</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%93%E5%AD%98"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 缓存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%A9%E5%87%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text"> 缩减</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.5.</span> <span class="toc-text"> 泛型函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text"> itertools:迭代器函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#chain"><span class="toc-number">3.2.1.</span> <span class="toc-text"> chain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zip_longest"><span class="toc-number">3.2.2.</span> <span class="toc-text"> zip_longest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#islice"><span class="toc-number">3.2.3.</span> <span class="toc-text"> islice</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tee"><span class="toc-number">3.2.4.</span> <span class="toc-text"> tee</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mapstarmap"><span class="toc-number">3.2.5.</span> <span class="toc-text"> map,starmap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#countcyclerepear"><span class="toc-number">3.2.6.</span> <span class="toc-text"> count,cycle,repear</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#dropwhiletakewhilefilterfilterfalsecompress"><span class="toc-number">3.2.7.</span> <span class="toc-text"> dropwhile,takewhile,filter,filterfalse,compress</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#groupby"><span class="toc-number">3.2.8.</span> <span class="toc-text"> groupby</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#accumulate"><span class="toc-number">3.2.9.</span> <span class="toc-text"> accumulate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#product"><span class="toc-number">3.2.10.</span> <span class="toc-text"> product</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#permutationscombinations"><span class="toc-number">3.2.11.</span> <span class="toc-text"> permutations,combinations</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#operator%E5%86%85%E7%BD%AE%E6%93%8D%E4%BD%9C%E7%AC%A6%E7%9A%84%E5%87%BD%E6%95%B0%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.</span> <span class="toc-text"> operator:内置操作符的函数结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contextlib%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8%E5%B7%A5%E5%85%B7"><span class="toc-number">3.4.</span> <span class="toc-text"> contextlib:上下文管理器工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%92%8C%E6%97%B6%E9%97%B4"><span class="toc-number">4.</span> <span class="toc-text"> 日期和时间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#time"><span class="toc-number">4.1.</span> <span class="toc-text"> time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#datetime"><span class="toc-number">4.2.</span> <span class="toc-text"> datetime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%93%8D%E4%BD%9C"><span class="toc-number">4.3.</span> <span class="toc-text"> 日期操作</span></a></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-python3lib-1" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      python标准库-1
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2023/03/30/python3lib-1/" class="article-date">
	  <time datetime="2023-03-30T05:59:34.925Z" itemprop="datePublished">2023-03-30</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/python3-%E6%A0%87%E5%87%86%E5%BA%93/" rel="tag">python3 标准库</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2023/03/30/python3lib-1/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 10.1k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 56(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># help()函数查看</span></span><br><span class="line"><span class="comment"># https://learnku.com/docs/pymotw/date-and-time/3380</span></span><br></pre></td></tr></table></figure>
<h2 id="文本处理"><a class="markdownIt-Anchor" href="#文本处理"></a> 文本处理</h2>
<h3 id="string"><a class="markdownIt-Anchor" href="#string"></a> string</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="comment"># 文本常量,格式化,模板</span></span><br><span class="line"><span class="built_in">print</span>(string.ascii_letters)</span><br><span class="line"><span class="built_in">print</span>(string.printable )</span><br><span class="line"><span class="built_in">print</span>(string.hexdigits)</span><br><span class="line"><span class="built_in">print</span>(string.octdigits)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;:&lt;30&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;left aligned&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;:0&gt;30&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;right aligned&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;:^30&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;centered&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&#123;:*^30&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="string">&#x27;centered&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;<span class="string">&quot;centered&quot;</span>:*^<span class="number">30</span>&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;int: &#123;0:d&#125;;  hex: &#123;0:x&#125;;  oct: &#123;0:o&#125;;  bin: &#123;0:b&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">42</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;int: &#123;0:d&#125;;  hex: &#123;0:#x&#125;;  oct: &#123;0:#o&#125;;  bin: &#123;0:#b&#125;&quot;</span>.<span class="built_in">format</span>(<span class="number">42</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;int: <span class="subst">&#123;<span class="number">42</span>:d&#125;</span>;  hex: <span class="subst">&#123;<span class="number">42</span>:#x&#125;</span>;  oct: <span class="subst">&#123;<span class="number">42</span>:#o&#125;</span>;  bin: <span class="subst">&#123;<span class="number">42</span>:#b&#125;</span>&quot;</span>)</span><br><span class="line"> <span class="comment"># 总是显示它符号</span></span><br><span class="line">formatstr = <span class="string">&#x27;&#123;:+f&#125;; &#123;:+f&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="number">3.14</span>, -<span class="number">3.14</span>) </span><br><span class="line"><span class="built_in">print</span>(formatstr)   </span><br><span class="line"><span class="comment"># 正数前显示空格</span></span><br><span class="line">formatstr = <span class="string">&#x27;&#123;: f&#125;; &#123;: f&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="number">3.14</span>, -<span class="number">3.14</span>)  </span><br><span class="line"><span class="built_in">print</span>(formatstr)   </span><br><span class="line"><span class="comment"># 只显示负号 同 &#x27;&#123;:f&#125;; &#123;:f&#125;&#x27;</span></span><br><span class="line">formatstr = <span class="string">&#x27;&#123;:-f&#125;; &#123;:-f&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="number">3.14</span>, -<span class="number">3.14</span>)  </span><br><span class="line"><span class="built_in">print</span>(formatstr)   </span><br></pre></td></tr></table></figure>
<pre><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!&quot;#$%&amp;'()*+,-./:;&lt;=&gt;?@[\]^_`&#123;|&#125;~ 	

0123456789abcdefABCDEF
01234567
left aligned                  
00000000000000000right aligned
           centered           
***********centered***********
***********centered***********
int: 42;  hex: 2a;  oct: 52;  bin: 101010
int: 42;  hex: 0x2a;  oct: 0o52;  bin: 0b101010
int: 42;  hex: 0x2a;  oct: 0o52;  bin: 0b101010
+3.140000; -3.140000
 3.140000; -3.140000
3.140000; -3.140000
</code></pre>
<h3 id="textwrap"><a class="markdownIt-Anchor" href="#textwrap"></a> textwrap</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> textwrap</span><br><span class="line"><span class="comment"># 多行文本处理,格式化文本段落(缩进)</span></span><br><span class="line">sample_text = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    The textwrap module can be used to format text for output in</span></span><br><span class="line"><span class="string">    situations where pretty-printing is desired.  It offers</span></span><br><span class="line"><span class="string">    programmatic functionality similar to the paragraph wrapping</span></span><br><span class="line"><span class="string">    or filling features found in many text editors.</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">dedented_text = textwrap.dedent(sample_text).strip()</span><br><span class="line"><span class="built_in">print</span>(dedented_text)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="keyword">for</span> width <span class="keyword">in</span> [<span class="number">45</span>, <span class="number">60</span>]:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125; Columns:\n&#x27;</span>.<span class="built_in">format</span>(width))</span><br><span class="line">    <span class="built_in">print</span>(textwrap.fill(dedented_text, width=width))</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dedented_text = textwrap.dedent(sample_text).strip()</span><br><span class="line"><span class="built_in">print</span>(textwrap.fill(dedented_text,</span><br><span class="line">                    initial_indent=<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                    subsequent_indent=<span class="string">&#x27; &#x27;</span> * <span class="number">4</span>,</span><br><span class="line">                    width=<span class="number">50</span>,</span><br><span class="line">                    ))</span><br></pre></td></tr></table></figure>
<pre><code>The textwrap module can be used to format text for output in
situations where pretty-printing is desired.  It offers
programmatic functionality similar to the paragraph wrapping
or filling features found in many text editors.

45 Columns:

The textwrap module can be used to format
text for output in situations where pretty-
printing is desired.  It offers programmatic
functionality similar to the paragraph
wrapping or filling features found in many
text editors.

60 Columns:

The textwrap module can be used to format text for output in
situations where pretty-printing is desired.  It offers
programmatic functionality similar to the paragraph wrapping
or filling features found in many text editors.

The textwrap module can be used to format text for
    output in situations where pretty-printing is
    desired.  It offers programmatic functionality
    similar to the paragraph wrapping or filling
    features found in many text editors.
</code></pre>
<h3 id="re"><a class="markdownIt-Anchor" href="#re"></a> re</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># **正则表达式**</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.直接用re模块的函数搜索</span></span><br><span class="line"><span class="comment"># 2.先用compile编译，然后用编译过的搜索</span></span><br><span class="line"><span class="comment"># 匹配</span></span><br><span class="line">pattern = <span class="string">&#x27;this&#x27;</span></span><br><span class="line">text = <span class="string">&#x27;Does this text match the pattern?&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> = re.search(pattern, text)</span><br><span class="line"></span><br><span class="line">s = <span class="keyword">match</span>.start()</span><br><span class="line">e = <span class="keyword">match</span>.end()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Found &quot;&#123;&#125;&quot;\nin &quot;&#123;&#125;&quot;\nfrom &#123;&#125; to &#123;&#125; (&quot;&#123;&#125;&quot;)&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">    <span class="keyword">match</span>.re.pattern, <span class="keyword">match</span>.string, s, e, text[s:e]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询所有</span></span><br><span class="line">text = <span class="string">&#x27;abbaaabbbbaaaaa&#x27;</span></span><br><span class="line"></span><br><span class="line">pattern = <span class="string">&#x27;ab&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> re.findall(pattern, text):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Found &#123;!r&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="keyword">match</span>))</span><br><span class="line">    </span><br><span class="line">text = <span class="string">&#x27;This is some text -- with punctuation.&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(text)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="comment"># 组匹配</span></span><br><span class="line">patterns = [</span><br><span class="line">    (<span class="string">r&#x27;^(\w+)&#x27;</span>, <span class="string">&#x27;word at start of string&#x27;</span>),</span><br><span class="line">    (<span class="string">r&#x27;(\w+)\S*$&#x27;</span>, <span class="string">&#x27;word at end, with optional punctuation&#x27;</span>),</span><br><span class="line">    (<span class="string">r&#x27;(\bt\w+)\W+(\w+)&#x27;</span>, <span class="string">&#x27;word starting with t, another word&#x27;</span>),</span><br><span class="line">    (<span class="string">r&#x27;(\w+t)\b&#x27;</span>, <span class="string">&#x27;word ending with t&#x27;</span>),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> pattern, desc <span class="keyword">in</span> patterns:</span><br><span class="line">    regex = re.<span class="built_in">compile</span>(pattern)</span><br><span class="line">    <span class="keyword">match</span> = regex.search(text)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&#x27;&#123;&#125;&#x27; (&#123;&#125;)\n&quot;</span>.<span class="built_in">format</span>(pattern, desc))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;  &#x27;</span>, <span class="keyword">match</span>.groups())</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 替换</span></span><br><span class="line">re.sub()</span><br><span class="line"><span class="comment"># 拆分</span></span><br><span class="line">re.split()</span><br></pre></td></tr></table></figure>
<pre><code>Found &quot;this&quot;
in &quot;Does this text match the pattern?&quot;
from 5 to 9 (&quot;this&quot;)
Found 'ab'
Found 'ab'
This is some text -- with punctuation.

'^(\w+)' (word at start of string)

   ('This',)

'(\w+)\S*$' (word at end, with optional punctuation)

   ('punctuation',)

'(\bt\w+)\W+(\w+)' (word starting with t, another word)

   ('text', 'with')

'(\w+t)\b' (word ending with t)

   ('text',)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">*:0次或多次</span></span><br><span class="line"><span class="string">+:一次或多次</span></span><br><span class="line"><span class="string">?:零次或一次</span></span><br><span class="line"><span class="string">&#123;a,b&#125;:指定出现次数</span></span><br><span class="line"><span class="string">?:在重复指令后面,取消贪心模式</span></span><br><span class="line"><span class="string">[ab]:匹配a或b</span></span><br><span class="line"><span class="string">[^ab]:不匹配a和b</span></span><br><span class="line"><span class="string">.:任意单个字符</span></span><br><span class="line"><span class="string">\d:数字</span></span><br><span class="line"><span class="string">\D:非数字</span></span><br><span class="line"><span class="string">\s:空白符(制表符,空格,换行)</span></span><br><span class="line"><span class="string">\S:非空白符</span></span><br><span class="line"><span class="string">\w:字母数字</span></span><br><span class="line"><span class="string">\W:非字母数字</span></span><br><span class="line"><span class="string">(?&lt;=pattern):匹配pattern开头的 (?&lt;=exp2)exp1:查找 exp2 后面的 exp1。</span></span><br><span class="line"><span class="string">(?&lt;!pattern):不匹配pattern开头的 (?&lt;!exp2)exp1:查找前面不是 exp2 的 exp1。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="difflib"><a class="markdownIt-Anchor" href="#difflib"></a> difflib</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> difflib</span><br><span class="line"><span class="comment"># 字符串比较序列</span></span><br><span class="line">text1 = <span class="string">&quot;&quot;&quot;Lorem ipsum dolor sit amet, consectetuer adipiscing</span></span><br><span class="line"><span class="string">elit. Integer eu lacus accumsan arcu fermentum euismod. Donec</span></span><br><span class="line"><span class="string">pulvinar porttitor tellus. Aliquam venenatis. Donec facilisis</span></span><br><span class="line"><span class="string">pharetra tortor.  In nec mauris eget magna consequat</span></span><br><span class="line"><span class="string">convalis. Nam sed sem vitae odio pellentesque interdum. Sed</span></span><br><span class="line"><span class="string">consequat viverra nisl. Suspendisse arcu metus, blandit quis,</span></span><br><span class="line"><span class="string">rhoncus ac, pharetra eget, velit. Mauris urna. Morbi nonummy</span></span><br><span class="line"><span class="string">molestie orci. Praesent nisi elit, fringilla ac, suscipit non,</span></span><br><span class="line"><span class="string">tristique vel, mauris. Curabitur vel lorem id nisl porta</span></span><br><span class="line"><span class="string">adipiscing. Suspendisse eu lectus. In nunc. Duis vulputate</span></span><br><span class="line"><span class="string">tristique enim. Donec quis lectus a justo imperdiet tempus.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">text1_lines = text1.splitlines()</span><br><span class="line"></span><br><span class="line">text2 = <span class="string">&quot;&quot;&quot;Lorem ipsum dolor sit amet, consectetuer adipiscing</span></span><br><span class="line"><span class="string">elit. Integer eu lacus accumsan arcu fermentum euismod. Donec</span></span><br><span class="line"><span class="string">pulvinar, porttitor tellus. Aliquam venenatis. Donec facilisis</span></span><br><span class="line"><span class="string">pharetra tortor. In nec mauris eget magna consequat</span></span><br><span class="line"><span class="string">convalis. Nam cras vitae mi vitae odio pellentesque interdum. Sed</span></span><br><span class="line"><span class="string">consequat viverra nisl. Suspendisse arcu metus, blandit quis,</span></span><br><span class="line"><span class="string">rhoncus ac, pharetra eget, velit. Mauris urna. Morbi nonummy</span></span><br><span class="line"><span class="string">molestie orci. Praesent nisi elit, fringilla ac, suscipit non,</span></span><br><span class="line"><span class="string">tristique vel, mauris. Curabitur vel lorem id nisl porta</span></span><br><span class="line"><span class="string">adipiscing. Duis vulputate tristique enim. Donec quis lectus a</span></span><br><span class="line"><span class="string">justo imperdiet tempus.  Suspendisse eu lectus. In nunc.&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">text2_lines = text2.splitlines()</span><br><span class="line">d = difflib.Differ()</span><br><span class="line">diff = d.compare(text1_lines, text2_lines)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>.join(diff))</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">- 只在第一个文件有</span></span><br><span class="line"><span class="string">+ 只在第二个文件有</span></span><br><span class="line"><span class="string">  两个文件中都有</span></span><br><span class="line"><span class="string">? 没有出现在两个文件中</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>
<pre><code>  Lorem ipsum dolor sit amet, consectetuer adipiscing
  elit. Integer eu lacus accumsan arcu fermentum euismod. Donec
- pulvinar porttitor tellus. Aliquam venenatis. Donec facilisis
+ pulvinar, porttitor tellus. Aliquam venenatis. Donec facilisis
?         +

- pharetra tortor.  In nec mauris eget magna consequat
?                 -

+ pharetra tortor. In nec mauris eget magna consequat
- convalis. Nam sed sem vitae odio pellentesque interdum. Sed
?                 - --

+ convalis. Nam cras vitae mi vitae odio pellentesque interdum. Sed
?               +++ +++++   +

  consequat viverra nisl. Suspendisse arcu metus, blandit quis,
  rhoncus ac, pharetra eget, velit. Mauris urna. Morbi nonummy
  molestie orci. Praesent nisi elit, fringilla ac, suscipit non,
  tristique vel, mauris. Curabitur vel lorem id nisl porta
- adipiscing. Suspendisse eu lectus. In nunc. Duis vulputate
- tristique enim. Donec quis lectus a justo imperdiet tempus.
+ adipiscing. Duis vulputate tristique enim. Donec quis lectus a
+ justo imperdiet tempus.  Suspendisse eu lectus. In nunc.
</code></pre>
<h2 id="数据结构"><a class="markdownIt-Anchor" href="#数据结构"></a> 数据结构</h2>
<h3 id="enum"><a class="markdownIt-Anchor" href="#enum"></a> enum</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> enum</span><br><span class="line"><span class="comment"># IntEnum支持大小比较</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BugStatus</span>(enum.Enum):</span><br><span class="line"></span><br><span class="line">    new = <span class="number">7</span></span><br><span class="line">    incomplete = <span class="number">6</span></span><br><span class="line">    invalid = <span class="number">5</span></span><br><span class="line">    wont_fix = <span class="number">4</span></span><br><span class="line">    in_progress = <span class="number">3</span></span><br><span class="line">    fix_committed = <span class="number">2</span></span><br><span class="line">    fix_released = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    by_design = <span class="number">4</span></span><br><span class="line">    closed = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 每个东西都有一个name一个value</span></span><br><span class="line"><span class="keyword">for</span> status <span class="keyword">in</span> BugStatus:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:15&#125; = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(status.name, status.value))</span><br><span class="line"><span class="comment"># 如果存在多个值，下面出现的就是别名，不想出现多个值，使用@unique</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nSame: by_design is wont_fix: &#x27;</span>,</span><br><span class="line">      BugStatus.by_design <span class="keyword">is</span> BugStatus.wont_fix)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Same: closed is fix_released: &#x27;</span>,</span><br><span class="line">      BugStatus.closed <span class="keyword">is</span> BugStatus.fix_released)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 空格分开，从1开始，也可以使用元组列表</span></span><br><span class="line">BugStatus = enum.Enum(</span><br><span class="line">    value=<span class="string">&#x27;BugStatus&#x27;</span>,</span><br><span class="line">    names=(<span class="string">&#x27;fix_released fix_committed in_progress &#x27;</span></span><br><span class="line">           <span class="string">&#x27;wont_fix invalid incomplete new&#x27;</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Member: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(BugStatus.new))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nAll members:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> status <span class="keyword">in</span> BugStatus:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:15&#125; = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(status.name, status.value))</span><br></pre></td></tr></table></figure>
<pre><code>new             = 7
incomplete      = 6
invalid         = 5
wont_fix        = 4
in_progress     = 3
fix_committed   = 2
fix_released    = 1

Same: by_design is wont_fix:  True
Same: closed is fix_released:  True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用元组作为值</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BugStatus</span>(enum.Enum):</span><br><span class="line">    new = (<span class="number">7</span>, [<span class="string">&#x27;incomplete&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;invalid&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;wont_fix&#x27;</span>,</span><br><span class="line">               <span class="string">&#x27;in_progress&#x27;</span>])</span><br><span class="line">    incomplete = (<span class="number">6</span>, [<span class="string">&#x27;new&#x27;</span>, <span class="string">&#x27;wont_fix&#x27;</span>])</span><br><span class="line">    invalid = (<span class="number">5</span>, [<span class="string">&#x27;new&#x27;</span>])</span><br><span class="line">    wont_fix = (<span class="number">4</span>, [<span class="string">&#x27;new&#x27;</span>])</span><br><span class="line">    in_progress = (<span class="number">3</span>, [<span class="string">&#x27;new&#x27;</span>, <span class="string">&#x27;fix_committed&#x27;</span>])</span><br><span class="line">    fix_committed = (<span class="number">2</span>, [<span class="string">&#x27;in_progress&#x27;</span>, <span class="string">&#x27;fix_released&#x27;</span>])</span><br><span class="line">    fix_released = (<span class="number">1</span>, [<span class="string">&#x27;new&#x27;</span>])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, num, transitions</span>):</span><br><span class="line">        self.num = num</span><br><span class="line">        self.transitions = transitions</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">can_transition</span>(<span class="params">self, new_state</span>):</span><br><span class="line">        <span class="keyword">return</span> new_state.name <span class="keyword">in</span> self.transitions</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Name:&#x27;</span>, BugStatus.in_progress)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Value:&#x27;</span>, BugStatus.in_progress.value)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Custom attribute:&#x27;</span>, BugStatus.in_progress.transitions)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Using attribute:&#x27;</span>,</span><br><span class="line">      BugStatus.in_progress.can_transition(BugStatus.new))</span><br></pre></td></tr></table></figure>
<pre><code>Name: BugStatus.in_progress
Value: (3, ['new', 'fix_committed'])
Custom attribute: ['new', 'fix_committed']
Using attribute: True
</code></pre>
<h3 id="collection"><a class="markdownIt-Anchor" href="#collection"></a> collection</h3>
<h4 id="chainmap"><a class="markdownIt-Anchor" href="#chainmap"></a> ChainMap</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ChainMap</span></span><br><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="comment"># 相当于把几个字典装入一个列表，会按照进入列表的顺序覆盖相同值</span></span><br><span class="line"><span class="comment"># 修改任一个，会修改到原来的数据</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = &#123;<span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;c&#x27;</span>: <span class="string">&#x27;C&#x27;</span>&#125;</span><br><span class="line">b = &#123;<span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;c&#x27;</span>: <span class="string">&#x27;D&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># 合并多个字典</span></span><br><span class="line">m = collections.ChainMap(a, b)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(m.maps)</span><br><span class="line"><span class="comment">#当多个字典中有相同的key值是，默认取第一个key对应的value</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Before: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(m[<span class="string">&#x27;c&#x27;</span>]))</span><br><span class="line">a[<span class="string">&#x27;c&#x27;</span>] = <span class="string">&#x27;E&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After : &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(m[<span class="string">&#x27;c&#x27;</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a:&#x27;</span>, a)</span><br><span class="line"><span class="comment"># reverse the list</span></span><br><span class="line">m.maps = <span class="built_in">list</span>(<span class="built_in">reversed</span>(m.maps))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(m.maps)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;c = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(m[<span class="string">&#x27;c&#x27;</span>]))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>[&#123;'a': 'A', 'c': 'C'&#125;, &#123;'b': 'B', 'c': 'D'&#125;]
Before: C
After : E
a: &#123;'a': 'A', 'c': 'E'&#125;
[&#123;'b': 'B', 'c': 'D'&#125;, &#123;'a': 'A', 'c': 'E'&#125;]
c = D
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 搜索查询底层映射，直到一个键被找到。不同的是，写，更新和删除只操作第一个映射。</span></span><br><span class="line">dict1= &#123;<span class="string">&quot;a&quot;</span>:<span class="string">&quot;zhangsan&quot;</span>,<span class="string">&quot;b&quot;</span>:<span class="string">&quot;lisi&quot;</span>&#125;</span><br><span class="line">dict2= &#123;<span class="string">&quot;c&quot;</span>:<span class="string">&quot;wangwu&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">new_dict = collections.ChainMap(dict1,dict2)</span><br><span class="line"><span class="built_in">print</span>(new_dict)</span><br><span class="line"></span><br><span class="line">new_dict1 = new_dict.new_child()</span><br><span class="line"><span class="built_in">print</span>(new_dict1)</span><br><span class="line">new_dict1[<span class="string">&quot;x&quot;</span>]=<span class="number">0</span></span><br><span class="line">new_dict1[<span class="string">&quot;y&quot;</span>] = <span class="number">100.0</span></span><br><span class="line">new_dict1[<span class="string">&quot;a&quot;</span>] = <span class="number">666</span></span><br><span class="line"><span class="built_in">print</span>(new_dict1)</span><br></pre></td></tr></table></figure>
<pre><code>ChainMap(&#123;'a': 'zhangsan', 'b': 'lisi'&#125;, &#123;'c': 'wangwu'&#125;)
ChainMap(&#123;&#125;, &#123;'a': 'zhangsan', 'b': 'lisi'&#125;, &#123;'c': 'wangwu'&#125;)
ChainMap(&#123;'x': 0, 'y': 100.0, 'a': 666&#125;, &#123;'a': 'zhangsan', 'b': 'lisi'&#125;, &#123;'c': 'wangwu'&#125;)
</code></pre>
<h4 id="counter"><a class="markdownIt-Anchor" href="#counter"></a> Counter</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三种构建方式1.一个元素序列，一个键值字典，关键字传参import collections</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(collections.Counter([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]))</span><br><span class="line"><span class="built_in">print</span>(collections.Counter(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">2</span>, <span class="string">&#x27;b&#x27;</span>: <span class="number">3</span>, <span class="string">&#x27;c&#x27;</span>: <span class="number">1</span>&#125;))</span><br><span class="line"><span class="built_in">print</span>(collections.Counter(a=<span class="number">2</span>, b=<span class="number">3</span>, c=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计数只会根据新数据增加，替换数据不会改变计数</span></span><br><span class="line"></span><br><span class="line">c = collections.Counter()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Initial :&#x27;</span>, c)</span><br><span class="line"></span><br><span class="line">c.update(<span class="string">&#x27;abcdaab&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Sequence:&#x27;</span>, c)</span><br><span class="line"></span><br><span class="line">c.update(&#123;<span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>, <span class="string">&#x27;d&#x27;</span>: <span class="number">5</span>&#125;)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Dict    :&#x27;</span>, c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以用字典API获取值,如果没有返回0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(c[<span class="string">&#x27;a&#x27;</span>],c[<span class="string">&#x27;666&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># elements返回所有元素,most_common()返回前n个最多的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 算数操作</span></span><br><span class="line">c1 = collections.Counter([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line">c2 = collections.Counter(<span class="string">&#x27;alphabet&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;C1:&#x27;</span>, c1)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;C2:&#x27;</span>, c2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计数相加</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nCombined counts:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(c1 + c2)</span><br><span class="line"><span class="comment"># 计数相减,小于0自动删除</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nSubtraction:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(c1 - c2)</span><br><span class="line"><span class="comment"># 取最小值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nIntersection (taking positive minimums):&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(c1 &amp; c2)</span><br><span class="line"><span class="comment"># 取最大值</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nUnion (taking maximums):&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(c1 | c2)</span><br></pre></td></tr></table></figure>
<pre><code>Counter(&#123;'b': 3, 'a': 2, 'c': 1&#125;)
Counter(&#123;'b': 3, 'a': 2, 'c': 1&#125;)
Counter(&#123;'b': 3, 'a': 2, 'c': 1&#125;)
Initial : Counter()
Sequence: Counter(&#123;'a': 3, 'b': 2, 'c': 1, 'd': 1&#125;)
Dict    : Counter(&#123;'d': 6, 'a': 4, 'b': 2, 'c': 1&#125;)
4 0
C1: Counter(&#123;'b': 3, 'a': 2, 'c': 1&#125;)
C2: Counter(&#123;'a': 2, 'l': 1, 'p': 1, 'h': 1, 'b': 1, 'e': 1, 't': 1&#125;)

Combined counts:
Counter(&#123;'a': 4, 'b': 4, 'c': 1, 'l': 1, 'p': 1, 'h': 1, 'e': 1, 't': 1&#125;)

Subtraction:
Counter(&#123;'b': 2, 'c': 1&#125;)

Intersection (taking positive minimums):
Counter(&#123;'a': 2, 'b': 1&#125;)

Union (taking maximums):
Counter(&#123;'b': 3, 'a': 2, 'c': 1, 'l': 1, 'p': 1, 'h': 1, 'e': 1, 't': 1&#125;)
</code></pre>
<h4 id="defaultdict"><a class="markdownIt-Anchor" href="#defaultdict"></a> defaultdict</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 没有键时,返回函数默认值</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">default_factory</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;default value&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d = collections.defaultdict(default_factory, foo=<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;d:&#x27;</span>, d)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;foo =&gt;&#x27;</span>, d[<span class="string">&#x27;foo&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;bar =&gt;&#x27;</span>, d[<span class="string">&#x27;bar&#x27;</span>])</span><br></pre></td></tr></table></figure>
<pre><code>d: defaultdict(&lt;function default_factory at 0x000001AA941D3DC0&gt;, &#123;'foo': 'bar'&#125;)
foo =&gt; bar
bar =&gt; default value
</code></pre>
<h4 id="deque"><a class="markdownIt-Anchor" href="#deque"></a> deque</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="comment"># 双端队列</span></span><br><span class="line"><span class="comment"># list常用函数+线程安全</span></span><br><span class="line"><span class="comment"># append(),appendleft(),pop(),popleft()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以设置最大长度,队列达到指定长度时会删除之前(队头)的元素</span></span><br><span class="line">d1 = collections.deque(maxlen=<span class="number">3</span>)</span><br><span class="line">d2 = collections.deque(maxlen=<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">    n = random.randint(<span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;n =&#x27;</span>, n)</span><br><span class="line">    d1.append(n)</span><br><span class="line">    d2.appendleft(n)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;D1:&#x27;</span>, d1)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;D2:&#x27;</span>, d2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 旋转</span></span><br><span class="line">d = collections.deque(<span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Normal        :&#x27;</span>, d)</span><br><span class="line"></span><br><span class="line">d = collections.deque(<span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line">d.rotate(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Right rotation:&#x27;</span>, d)</span><br><span class="line"></span><br><span class="line">d = collections.deque(<span class="built_in">range</span>(<span class="number">10</span>))</span><br><span class="line">d.rotate(-<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Left rotation :&#x27;</span>, d)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>n = 7
D1: deque([7], maxlen=3)
D2: deque([7], maxlen=3)
n = 73
D1: deque([7, 73], maxlen=3)
D2: deque([73, 7], maxlen=3)
n = 34
D1: deque([7, 73, 34], maxlen=3)
D2: deque([34, 73, 7], maxlen=3)
n = 56
D1: deque([73, 34, 56], maxlen=3)
D2: deque([56, 34, 73], maxlen=3)
n = 79
D1: deque([34, 56, 79], maxlen=3)
D2: deque([79, 56, 34], maxlen=3)
Normal        : deque([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
Right rotation: deque([8, 9, 0, 1, 2, 3, 4, 5, 6, 7])
Left rotation : deque([2, 3, 4, 5, 6, 7, 8, 9, 0, 1])
</code></pre>
<h4 id="namedtuple"><a class="markdownIt-Anchor" href="#namedtuple"></a> namedtuple</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带有名字的元组,会返回一个有指定属性的类</span></span><br><span class="line"><span class="comment"># 属性名字不能是关键字,属性不能修改</span></span><br><span class="line">Person = collections.namedtuple(<span class="string">&#x27;Person&#x27;</span>, <span class="string">&#x27;name age&#x27;</span>)</span><br><span class="line"></span><br><span class="line">bob = Person(name=<span class="string">&#x27;Bob&#x27;</span>, age=<span class="number">30</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Representation:&#x27;</span>, bob)</span><br><span class="line"><span class="comment"># 转为OrderedDict</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;As Dictionary:&#x27;</span>, bob._asdict())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nBefore:&#x27;</span>, bob)</span><br><span class="line">bob2 = bob._replace(name=<span class="string">&#x27;Robert&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After:&#x27;</span>, bob2)</span><br><span class="line"><span class="comment"># 不是同一个实例</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Same?:&#x27;</span>, bob <span class="keyword">is</span> bob2)</span><br></pre></td></tr></table></figure>
<pre><code>Representation: Person(name='Bob', age=30)
As Dictionary: &#123;'name': 'Bob', 'age': 30&#125;

Before: Person(name='Bob', age=30)
After: Person(name='Robert', age=30)
Same?: False
</code></pre>
<h4 id="ordereddict"><a class="markdownIt-Anchor" href="#ordereddict"></a> OrderedDict</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"><span class="comment"># 会记住往字典里添加的顺序import collections</span></span><br><span class="line"><span class="comment"># 进行比较时,不仅比较值是否相同,也比较加入顺序</span></span><br><span class="line">d = collections.OrderedDict(</span><br><span class="line">    [(<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;A&#x27;</span>), (<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;B&#x27;</span>), (<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;C&#x27;</span>)]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Before:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br><span class="line"></span><br><span class="line">d.move_to_end(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nmove_to_end():&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br><span class="line"></span><br><span class="line">d.move_to_end(<span class="string">&#x27;b&#x27;</span>, last=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nmove_to_end(last=False):&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> d.items():</span><br><span class="line">    <span class="built_in">print</span>(k, v)</span><br></pre></td></tr></table></figure>
<pre><code>Before:
a A
b B
c C

move_to_end():
a A
c C
b B

move_to_end(last=False):
b B
a A
c C
</code></pre>
<h4 id="collectionsabc"><a class="markdownIt-Anchor" href="#collectionsabc"></a> collections.abc</h4>
<h3 id="array数组"><a class="markdownIt-Anchor" href="#array数组"></a> array数组</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> array</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="comment"># 返回二进制数据 data 的十六进制表示形式。 data 的每个字节都被转换为相应的2位十六进制表示形式。</span></span><br><span class="line"></span><br><span class="line">a = array.array(<span class="string">&#x27;i&#x27;</span>, <span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Initial :&#x27;</span>, a)</span><br><span class="line"></span><br><span class="line">s = <span class="string">b&#x27;This is the array.&#x27;</span></span><br><span class="line">a = array.array(<span class="string">&#x27;b&#x27;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;As byte string:&#x27;</span>, s)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;As array      :&#x27;</span>, a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;As hex        :&#x27;</span>, binascii.hexlify(a))</span><br><span class="line"><span class="comment"># 与序列类似的函数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">chr</span>(a[<span class="number">0</span>]))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>Initial : array('i', [0, 1, 2])
As byte string: b'This is the array.'
As array      : array('b', [84, 104, 105, 115, 32, 105, 115, 32, 116, 104, 101, 32, 97, 114, 114, 97, 121, 46])
As hex        : b'54686973206973207468652061727261792e'
T
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 二进制转换</span></span><br><span class="line"><span class="keyword">import</span> array</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"></span><br><span class="line">a = array.array(<span class="string">&#x27;i&#x27;</span>, <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;A1:&#x27;</span>, a)</span><br><span class="line"></span><br><span class="line">as_bytes = a.tobytes()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Byets: <span class="subst">&#123;as_bytes&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Bytes:&#x27;</span>, binascii.hexlify(as_bytes))</span><br><span class="line"></span><br><span class="line">a2 = array.array(<span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">a2.frombytes(as_bytes)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;A2:&#x27;</span>, a2)</span><br></pre></td></tr></table></figure>
<pre><code>A1: array('i', [0, 1, 2, 3, 4])
Byets: b'\x00\x00\x00\x00\x01\x00\x00\x00\x02\x00\x00\x00\x03\x00\x00\x00\x04\x00\x00\x00'
Bytes: b'0000000001000000020000000300000004000000'
A2: array('i', [0, 1, 2, 3, 4])
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># array文件转换</span></span><br><span class="line"><span class="keyword">import</span> array</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> tempfile</span><br><span class="line"></span><br><span class="line">a = array.array(<span class="string">&#x27;i&#x27;</span>, <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;A1:&#x27;</span>, a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Write the array of numbers to a temporary file</span></span><br><span class="line">output = tempfile.NamedTemporaryFile()</span><br><span class="line">a.tofile(output.file)  <span class="comment"># must pass an *actual* file</span></span><br><span class="line">output.flush()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read the raw data</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(output.name, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> <span class="built_in">input</span>:</span><br><span class="line">    raw_data = <span class="built_in">input</span>.read()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Raw Contents:&#x27;</span>, binascii.hexlify(raw_data))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Read the data into an array</span></span><br><span class="line">    <span class="built_in">input</span>.seek(<span class="number">0</span>)</span><br><span class="line">    a2 = array.array(<span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">    a2.fromfile(<span class="built_in">input</span>, <span class="built_in">len</span>(a))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;A2:&#x27;</span>, a2)</span><br></pre></td></tr></table></figure>
<h3 id="heapq"><a class="markdownIt-Anchor" href="#heapq"></a> heapq</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"><span class="comment"># 堆排序,只有小项堆</span></span><br><span class="line"><span class="comment"># 用数组的形式表示堆,N的子元素位于2*N+1和2*N+2</span></span><br><span class="line">data=[<span class="number">19</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">11</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;original data: <span class="subst">&#123;data&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 把原数组转为堆结构数组</span></span><br><span class="line"><span class="comment"># 可以之间转换堆,也可以一个个往里面添加元素heappush</span></span><br><span class="line">heapq.heapify(data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;heapify data: <span class="subst">&#123;data&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># heapreplace 删除最小元素并加入一个</span></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">13</span>]:</span><br><span class="line">    smallest = heapq.heapreplace(data, n)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;replace &#123;:&gt;2&#125; with &#123;:&gt;2&#125;:&#x27;</span>.<span class="built_in">format</span>(smallest, n))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;replaced data: <span class="subst">&#123;data&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># nlargest nsmallest返回前几个大/小的</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># heapq.merge()合并几个有序列表</span></span><br></pre></td></tr></table></figure>
<pre><code>original data: [19, 9, 4, 10, 11]
heapify data: [4, 9, 19, 10, 11]
replace  4 with  0:
replace  0 with 13:
replaced data: [9, 10, 19, 13, 11]
</code></pre>
<h3 id="bisect"><a class="markdownIt-Anchor" href="#bisect"></a> bisect</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> bisect</span><br><span class="line"></span><br><span class="line">values = [<span class="number">14</span>, <span class="number">85</span>, <span class="number">77</span>, <span class="number">26</span>, <span class="number">50</span>, <span class="number">45</span>, <span class="number">66</span>, <span class="number">79</span>, <span class="number">10</span>, <span class="number">3</span>, <span class="number">84</span>, <span class="number">77</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---  ---  --------&#x27;</span>)</span><br><span class="line"></span><br><span class="line">l = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> values:</span><br><span class="line">    <span class="comment"># 默认右插</span></span><br><span class="line">    position = bisect.bisect(l, i)</span><br><span class="line">    bisect.insort(l, i)    </span><br><span class="line">    <span class="comment"># position = bisect.bisect_left(l, i)</span></span><br><span class="line">    <span class="comment"># bisect.insort_left(l, i)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:3&#125;  &#123;:3&#125;&#x27;</span>.<span class="built_in">format</span>(i, position), l)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>---  ---  --------
 14    0 [14]
 85    1 [14, 85]
 77    1 [14, 77, 85]
 26    1 [14, 26, 77, 85]
 50    2 [14, 26, 50, 77, 85]
 45    2 [14, 26, 45, 50, 77, 85]
 66    4 [14, 26, 45, 50, 66, 77, 85]
 79    6 [14, 26, 45, 50, 66, 77, 79, 85]
 10    0 [10, 14, 26, 45, 50, 66, 77, 79, 85]
  3    0 [3, 10, 14, 26, 45, 50, 66, 77, 79, 85]
 84    9 [3, 10, 14, 26, 45, 50, 66, 77, 79, 84, 85]
 77    8 [3, 10, 14, 26, 45, 50, 66, 77, 77, 79, 84, 85]
  1    0 [1, 3, 10, 14, 26, 45, 50, 66, 77, 77, 79, 84, 85]
</code></pre>
<h3 id="queue"><a class="markdownIt-Anchor" href="#queue"></a> queue</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> queue</span><br><span class="line"><span class="comment"># 线程安全的队列</span></span><br><span class="line"><span class="comment"># maxsize 是个整数，用于设置可以放入队列中的项目数的上限。</span></span><br><span class="line"><span class="comment"># 当达到这个大小的时候，插入操作将阻塞至队列中的项目被消费掉</span></span><br><span class="line"><span class="comment"># FIFO队列,普通队列</span></span><br><span class="line">queue.Queue()</span><br><span class="line"><span class="comment"># LIFO栈</span></span><br><span class="line">queue.LifoQueue()</span><br><span class="line"><span class="comment"># 优先队列</span></span><br><span class="line">queue.PriorityQueue()</span><br><span class="line"></span><br><span class="line">q = queue.PriorityQueue()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 队列的变体，按优先级顺序（最低优先）检索打开的条目。</span></span><br><span class="line"><span class="comment"># 条目通常是以下格式的元组：</span></span><br><span class="line"><span class="comment"># 插入格式：q.put((priority number, data))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义类,实现比较方法,__eq__,__lt__</span></span><br><span class="line">q=queue.PriorityQueue()</span><br><span class="line">q.put((<span class="number">2</span>, <span class="string">&quot;Lisa&quot;</span>))</span><br><span class="line">q.put((<span class="number">1</span>, <span class="string">&quot;Lucy&quot;</span>))</span><br><span class="line">q.put((<span class="number">0</span>, <span class="string">&quot;Tom&quot;</span>))</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">not</span> q.empty():</span><br><span class="line">    <span class="built_in">print</span>(q.get())</span><br></pre></td></tr></table></figure>
<pre><code>(0, 'Tom')
(1, 'Lucy')
(2, 'Lisa')
</code></pre>
<h3 id="struct二进制数据结构"><a class="markdownIt-Anchor" href="#struct二进制数据结构"></a> struct:二进制数据结构</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"><span class="comment"># 将字节串解读为打包的二进制数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># struct的pack函数把任意数据类型变成bytes</span></span><br><span class="line">p=struct.pack(<span class="string">&#x27;&gt;I&#x27;</span>, <span class="number">66666</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;type-&gt;bytes:<span class="subst">&#123;p&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># unpack把bytes变成相应的数据类型</span></span><br><span class="line">p=struct.unpack(<span class="string">&quot;&gt;I&quot;</span>, <span class="string">b&quot;\x00\x01\x04j&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;bytes-&gt;type:<span class="subst">&#123;p&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>type-&gt;bytes:b'\x00\x01\x04j'
bytes-&gt;type:(66666,)
</code></pre>
<h3 id="weakref对象的非永久引用"><a class="markdownIt-Anchor" href="#weakref对象的非永久引用"></a> weakref:对象的非永久引用</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> weakref</span><br><span class="line"><span class="comment"># 弱引用不会增加对象的引用数量。因此，弱引用不会妨碍所指对象被当作垃圾回收。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExpensiveObject</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;(Deleting &#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(self))</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&#x27;ExpensiveObject&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">callback</span>(<span class="params">reference</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Invoked when referenced object is deleted&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;callback(&#123;!r&#125;)&#x27;</span>.<span class="built_in">format</span>(reference))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">obj = ExpensiveObject()</span><br><span class="line">r = weakref.ref(obj, callback)</span><br><span class="line"><span class="comment"># 会在finalize中提供一个对象的引用,永远不会被回收</span></span><br><span class="line"><span class="comment"># f = weakref.finalize(obj, on_finalize, obj)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;obj:&#x27;</span>, obj)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ref:&#x27;</span>, r)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;r():&#x27;</span>, r())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;deleting obj&#x27;</span>)</span><br><span class="line"><span class="keyword">del</span> obj</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;r():&#x27;</span>, r())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># WeakValueDictionary： 实现的是一种可变映射，里面的值是对象的弱引用。</span></span><br><span class="line"><span class="comment"># 被引用的对象在程序中的其他地方被当作垃圾回收后，对应的键会自动从 WeakValueDictionary 中删除。因此，WeakValueDictionary 经常用于缓存。</span></span><br><span class="line"><span class="comment"># WeakValueDictionary 示例：</span></span><br><span class="line"><span class="comment"># WeakValueDictionary 示例：</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cheese</span>:</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, kind</span>):</span><br><span class="line">        self.kind = kind</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Cheese(%r)&#x27;</span> % self.kind</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 执行：</span></span><br><span class="line"> </span><br><span class="line">stock = weakref.WeakValueDictionary()  <span class="comment"># 创建弱引用字典实例。</span></span><br><span class="line"> </span><br><span class="line">catalog = [Cheese(<span class="string">&#x27;Read Leicester&#x27;</span>), Cheese(<span class="string">&#x27;Tilsit&#x27;</span>),Cheese(<span class="string">&#x27;Brie&#x27;</span>), Cheese(<span class="string">&#x27;Parmesan&#x27;</span>)]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> cheese <span class="keyword">in</span> catalog:</span><br><span class="line">   stock[cheese.kind] = cheese  <span class="comment"># 名称映射到实例. [弱引用]</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(stock.keys()))</span><br><span class="line"> </span><br><span class="line"><span class="keyword">del</span> catalog</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(stock.keys()) ) <span class="comment"># 为什么还剩一个？ 因为临时变量。</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">del</span> cheese</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(stock.keys()) ) <span class="comment"># 临时变量删除后，为空.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> weakref</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>:                            <span class="comment"># 这里新建一个类，因为WeakValueDictionary()</span></span><br><span class="line">     <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, value</span>):      <span class="comment"># 要求value是一个obj</span></span><br><span class="line">             self.value = value</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">test_weak_value_dict</span>():</span><br><span class="line">     d= weakref.WeakValueDictionary() <span class="comment">#如果d是普通字典,那么还是会print(test1)</span></span><br><span class="line">     k1 = <span class="string">&#x27;test1&#x27;</span>                    </span><br><span class="line">     v1 = C(<span class="number">1</span>)                       <span class="comment"># 这时候C(1)是有一个强引用的：v1</span></span><br><span class="line">     d[k1] = v1                      <span class="comment"># 这个语句也就是字典赋值，但是由于我们用的</span></span><br><span class="line">     <span class="built_in">print</span>(d[k1])                    <span class="comment"># WeakValueDictionary()，所以字典里的是弱引用</span></span><br><span class="line">     <span class="keyword">del</span> v1                          <span class="comment"># 这时候删除了C(1)唯一的强引用 v1，因此</span></span><br><span class="line">     <span class="built_in">print</span>(d[k1])                   <span class="comment"># 会报错</span></span><br></pre></td></tr></table></figure>
<pre><code>instance ExpensiveObject
obj: ExpensiveObject
ref: &lt;weakref at 0x000001AA94201360; to 'ExpensiveObject' at 0x000001AA94117AF0&gt;
r(): ExpensiveObject
deleting obj
r(): ExpensiveObject
['Brie', 'Parmesan', 'Read Leicester', 'Tilsit']
['Parmesan']
[]
</code></pre>
<h3 id="copy"><a class="markdownIt-Anchor" href="#copy"></a> copy</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 浅拷贝深拷贝</span></span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当重载比较运算符时，可以只实现其中一两种，其他的会自动生成</span></span><br><span class="line"><span class="meta">@functools.total_ordering</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.name == other.name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__gt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">return</span> self.name &gt; other.name</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = MyClass(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">my_list = [a]</span><br><span class="line">dup = copy.copy(my_list)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;             my_list:&#x27;</span>, my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;                 dup:&#x27;</span>, dup)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;      dup is my_list:&#x27;</span>, (dup <span class="keyword">is</span> my_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;      dup == my_list:&#x27;</span>, (dup == my_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;dup[0] is my_list[0]:&#x27;</span>, (dup[<span class="number">0</span>] <span class="keyword">is</span> my_list[<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;dup[0] == my_list[0]:&#x27;</span>, (dup[<span class="number">0</span>] == my_list[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = MyClass(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">my_list = [a]</span><br><span class="line">dup = copy.deepcopy(my_list)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;             my_list:&#x27;</span>, my_list)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;                 dup:&#x27;</span>, dup)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;      dup is my_list:&#x27;</span>, (dup <span class="keyword">is</span> my_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;      dup == my_list:&#x27;</span>, (dup == my_list))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;dup[0] is my_list[0]:&#x27;</span>, (dup[<span class="number">0</span>] <span class="keyword">is</span> my_list[<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;dup[0] == my_list[0]:&#x27;</span>, (dup[<span class="number">0</span>] == my_list[<span class="number">0</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 类实现,控制建立副本</span></span><br><span class="line"><span class="comment"># __copy()__</span></span><br><span class="line"><span class="comment"># __deepcopy()__</span></span><br></pre></td></tr></table></figure>
<pre><code>             my_list: [&lt;__main__.MyClass object at 0x000001AA940FF340&gt;]
                 dup: [&lt;__main__.MyClass object at 0x000001AA940FF340&gt;]
      dup is my_list: False
      dup == my_list: True
dup[0] is my_list[0]: True
dup[0] == my_list[0]: True
             my_list: [&lt;__main__.MyClass object at 0x000001AA94208A90&gt;]
                 dup: [&lt;__main__.MyClass object at 0x000001AA941FFFD0&gt;]
      dup is my_list: False
      dup == my_list: True
dup[0] is my_list[0]: False
dup[0] == my_list[0]: True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, connections</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.connections = connections</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_connection</span>(<span class="params">self, other</span>):</span><br><span class="line">        self.connections.append(other)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Graph(name=&#123;&#125;, id=&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">            self.name, <span class="built_in">id</span>(self))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__deepcopy__</span>(<span class="params">self, memo</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;\nCalling __deepcopy__ for &#123;!r&#125;&#x27;</span>.<span class="built_in">format</span>(self))</span><br><span class="line">        <span class="keyword">if</span> self <span class="keyword">in</span> memo:</span><br><span class="line">            existing = memo.get(self)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;  Already copied to &#123;!r&#125;&#x27;</span>.<span class="built_in">format</span>(existing))</span><br><span class="line">            <span class="keyword">return</span> existing</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  Memo dictionary:&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> memo:</span><br><span class="line">            <span class="keyword">for</span> k, v <span class="keyword">in</span> memo.items():</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;    &#123;&#125;: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(k, v))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;    (empty)&#x27;</span>)</span><br><span class="line">        dup = Graph(copy.deepcopy(self.name, memo), [])</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  Copying to new object &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(dup))</span><br><span class="line">        memo[self] = dup</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> self.connections:</span><br><span class="line">            dup.add_connection(copy.deepcopy(c, memo))</span><br><span class="line">        <span class="keyword">return</span> dup</span><br><span class="line"></span><br><span class="line"><span class="comment"># memo字典跟踪已复制的对象避免递归</span></span><br><span class="line">root = Graph(<span class="string">&#x27;root&#x27;</span>, [])</span><br><span class="line">a = Graph(<span class="string">&#x27;a&#x27;</span>, [root])</span><br><span class="line">b = Graph(<span class="string">&#x27;b&#x27;</span>, [a, root])</span><br><span class="line">root.add_connection(a)</span><br><span class="line">root.add_connection(b)</span><br><span class="line"></span><br><span class="line">dup = copy.deepcopy(root)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="pprint"><a class="markdownIt-Anchor" href="#pprint"></a> pprint</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line"><span class="comment"># 美观打印</span></span><br><span class="line">data = [</span><br><span class="line">    (<span class="number">1</span>, &#123;<span class="string">&#x27;a&#x27;</span>: <span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;b&#x27;</span>: <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;c&#x27;</span>: <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;d&#x27;</span>: <span class="string">&#x27;D&#x27;</span>&#125;),</span><br><span class="line">    (<span class="number">2</span>, &#123;<span class="string">&#x27;e&#x27;</span>: <span class="string">&#x27;E&#x27;</span>, <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;F&#x27;</span>, <span class="string">&#x27;g&#x27;</span>: <span class="string">&#x27;G&#x27;</span>, <span class="string">&#x27;h&#x27;</span>: <span class="string">&#x27;H&#x27;</span>,</span><br><span class="line">         <span class="string">&#x27;i&#x27;</span>: <span class="string">&#x27;I&#x27;</span>, <span class="string">&#x27;j&#x27;</span>: <span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;k&#x27;</span>: <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;l&#x27;</span>: <span class="string">&#x27;L&#x27;</span>&#125;),</span><br><span class="line">    (<span class="number">3</span>, [<span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;n&#x27;</span>]),</span><br><span class="line">    (<span class="number">4</span>, [<span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;q&#x27;</span>]),</span><br><span class="line">    (<span class="number">5</span>, [<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;t&#x27;</span><span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>]),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line"><span class="comment"># depth可以控制打印深度,width控制打印宽度,compact会尝试更加紧凑</span></span><br><span class="line">pprint.pprint(data,compact=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<pre><code>[(1, &#123;'a': 'A', 'b': 'B', 'c': 'C', 'd': 'D'&#125;), (2, &#123;'e': 'E', 'f': 'F', 'g': 'G', 'h': 'H', 'i': 'I', 'j': 'J', 'k': 'K', 'l': 'L'&#125;), (3, ['m', 'n']), (4, ['o', 'p', 'q']), (5, ['r', 's', 'tu', 'v', 'x', 'y', 'z'])]
[(1, &#123;'a': 'A', 'b': 'B', 'c': 'C', 'd': 'D'&#125;),
 (2,
  &#123;'e': 'E',
   'f': 'F',
   'g': 'G',
   'h': 'H',
   'i': 'I',
   'j': 'J',
   'k': 'K',
   'l': 'L'&#125;),
 (3, ['m', 'n']), (4, ['o', 'p', 'q']),
 (5, ['r', 's', 'tu', 'v', 'x', 'y', 'z'])]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pformat</span><br><span class="line"></span><br><span class="line">logging.basicConfig(</span><br><span class="line">    level=logging.DEBUG,</span><br><span class="line">    <span class="built_in">format</span>=<span class="string">&#x27;%(levelname)-8s %(message)s&#x27;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">logging.debug(<span class="string">&#x27;Logging pformatted data&#x27;</span>)</span><br><span class="line"><span class="comment"># 格式化转成字符串</span></span><br><span class="line">formatted = pformat(data)</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> formatted.splitlines():</span><br><span class="line">    logging.debug(line.rstrip())</span><br><span class="line">    <span class="comment"># print(line.rstrip())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归打印</span></span><br><span class="line">local_data = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">local_data.append(local_data)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;id(local_data) =&gt;&#x27;</span>, <span class="built_in">id</span>(local_data))</span><br><span class="line">pprint.pprint(local_data)</span><br><span class="line"><span class="built_in">print</span>(local_data)</span><br></pre></td></tr></table></figure>
<pre><code>DEBUG    Logging pformatted data
DEBUG    [(1, &#123;'a': 'A', 'b': 'B', 'c': 'C', 'd': 'D'&#125;),
DEBUG     (2,
DEBUG      &#123;'e': 'E',
DEBUG       'f': 'F',
DEBUG       'g': 'G',
DEBUG       'h': 'H',
DEBUG       'i': 'I',
DEBUG       'j': 'J',
DEBUG       'k': 'K',
DEBUG       'l': 'L'&#125;),
DEBUG     (3, ['m', 'n']),
DEBUG     (4, ['o', 'p', 'q']),
DEBUG     (5, ['r', 's', 'tu', 'v', 'x', 'y', 'z'])]


id(local_data) =&gt; 1832127417216
['a', 'b', 1, 2, &lt;Recursion on list with id=1832127417216&gt;]
['a', 'b', 1, 2, [...]]
</code></pre>
<h2 id="算法"><a class="markdownIt-Anchor" href="#算法"></a> 算法</h2>
<h3 id="functools管理函数的工具"><a class="markdownIt-Anchor" href="#functools管理函数的工具"></a> functools:管理函数的工具</h3>
<h4 id="partial"><a class="markdownIt-Anchor" href="#partial"></a> partial</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"><span class="comment"># 将一个函数的部分参数预先绑定为某些值，从而得到一个新的具有较少可变参数的函数</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a,b,*args, **kwargs</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;a:<span class="subst">&#123;a&#125;</span>,  b:<span class="subst">&#123;b&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="comment"># 打印位置参数</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> args:</span><br><span class="line">        <span class="built_in">print</span>(n)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">20</span>)</span><br><span class="line">    <span class="comment"># 打印关键字参数</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> kwargs.items():</span><br><span class="line">       <span class="built_in">print</span>(<span class="string">&#x27;%s:%s&#x27;</span> % (k, v))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span>*<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 普通调用</span></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, v1=<span class="number">10</span>, v2=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># partial的参数会先占用函数前面的参数,后面传的会依次当作后面的形参</span></span><br><span class="line">add_partial = partial(add, <span class="number">10</span>, k1=<span class="number">10</span>, k2=<span class="number">20</span>)</span><br><span class="line">add_partial(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, k3=<span class="number">20</span>)</span><br><span class="line">add_partial(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, k1=<span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<pre><code>a:1,  b:2
3
--------------------
v1:10
v2:20
--------------------
a:10,  b:1
2
3
--------------------
k1:10
k2:20
k3:20
--------------------
a:10,  b:1
2
3
--------------------
k1:20
k2:20
--------------------
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># partialmethod和partial实现相同的功能，只是 partial在类方法中使用会报错，而此函数用在类方法中；</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partialmethod</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cell</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self._alive = <span class="literal">False</span></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">alive</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._alive</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">set_state</span>(<span class="params">self, state</span>):</span><br><span class="line">        self._alive = <span class="built_in">bool</span>(state)</span><br><span class="line">    set_alive = partialmethod(set_state, <span class="literal">True</span>)</span><br><span class="line">    set_dead = partialmethod(set_state, <span class="literal">False</span>)</span><br><span class="line"> </span><br><span class="line">c = Cell()</span><br><span class="line">c.alive <span class="comment"># 结果为:False</span></span><br><span class="line"> </span><br><span class="line">c.set_alive()</span><br><span class="line">c.alive <span class="comment"># 结果为:True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">standalone</span>(<span class="params">self, a=<span class="number">1</span>, b=<span class="number">2</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;  called standalone with:&#x27;</span>, (self, a, b))</span><br><span class="line">    <span class="keyword">if</span> self <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  self.attr =&#x27;</span>, self.attr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.attr = <span class="string">&#x27;instance attribute&#x27;</span></span><br><span class="line"></span><br><span class="line">    method1 = partialmethod(standalone)</span><br><span class="line">    method2 = partial(standalone)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">o = MyClass()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;standalone&#x27;</span>)</span><br><span class="line">standalone(<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="comment"># 可以把对象传进去</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;method1 as partialmethod&#x27;</span>)</span><br><span class="line">o.method1()</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="comment"># 穿不进去对象</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;method2 as partial&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    o.method2()</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> err:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ERROR: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(err))</span><br></pre></td></tr></table></figure>
<pre><code>standalone
  called standalone with: (None, 1, 2)

method1 as partialmethod
  called standalone with: (&lt;__main__.MyClass object at 0x0000021B97BA8B80&gt;, 1, 2)
  self.attr = instance attribute

method2 as partial
ERROR: standalone() missing 1 required positional argument: 'self'
</code></pre>
<h4 id="富比较"><a class="markdownIt-Anchor" href="#富比较"></a> 富比较</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">大于 &gt;  __gt__()</span></span><br><span class="line"><span class="string">大于等于 &gt;=  __ge__()</span></span><br><span class="line"><span class="string">等于 ==  __eq__()</span></span><br><span class="line"><span class="string">小于 &lt;  __lt__()</span></span><br><span class="line"><span class="string">小于等于 &lt;=  __le__()</span></span><br><span class="line"><span class="string">不等于 != __ne()__</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@functools.total_ordering</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyObject</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, val</span>):</span><br><span class="line">        self.val = val</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  testing __eq__(&#123;&#125;, &#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">            self.val, other.val))</span><br><span class="line">        <span class="keyword">return</span> self.val == other.val</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__gt__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  testing __gt__(&#123;&#125;, &#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">            self.val, other.val))</span><br><span class="line">        <span class="keyword">return</span> self.val &gt; other.val</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Methods:\n&#x27;</span>)</span><br><span class="line">pprint(inspect.getmembers(MyObject, inspect.isfunction))</span><br><span class="line"></span><br><span class="line">a = MyObject(<span class="number">1</span>)</span><br><span class="line">b = MyObject(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nComparisons:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> expr <span class="keyword">in</span> [<span class="string">&#x27;a &lt; b&#x27;</span>, <span class="string">&#x27;a &lt;= b&#x27;</span>, <span class="string">&#x27;a == b&#x27;</span>, <span class="string">&#x27;a &gt;= b&#x27;</span>, <span class="string">&#x27;a &gt; b&#x27;</span>]:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\n&#123;:&lt;6&#125;:&#x27;</span>.<span class="built_in">format</span>(expr))</span><br><span class="line">    result = <span class="built_in">eval</span>(expr)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;  result of &#123;&#125;: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(expr, result))</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>Methods:

[('__eq__', &lt;function MyObject.__eq__ at 0x0000021B998A7940&gt;),
 ('__ge__', &lt;function _ge_from_gt at 0x0000021B932024C0&gt;),
 ('__gt__', &lt;function MyObject.__gt__ at 0x0000021B998A70D0&gt;),
 ('__init__', &lt;function MyObject.__init__ at 0x0000021B998A79D0&gt;),
 ('__le__', &lt;function _le_from_gt at 0x0000021B93202550&gt;),
 ('__lt__', &lt;function _lt_from_gt at 0x0000021B93202430&gt;)]

Comparisons:

a &lt; b :
  testing __gt__(1, 2)
  testing __eq__(1, 2)
  result of a &lt; b: True

a &lt;= b:
  testing __gt__(1, 2)
  result of a &lt;= b: True

a == b:
  testing __eq__(1, 2)
  result of a == b: False

a &gt;= b:
  testing __gt__(1, 2)
  testing __eq__(1, 2)
  result of a &gt;= b: False

a &gt; b :
  testing __gt__(1, 2)
  result of a &gt; b: False
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cmp_to_key将 Python 2 程序转换至新版的转换工具，以保持对比较函数的兼容。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">key 参数：Python 3 支持，接受的函数（入参为每个元素）返回值（对这个元素的计算），表示此元素的权值，sorted 将按照权值大小进行排序</span></span><br><span class="line"><span class="string">cmp 参数：Python 2 支持，接受的函数是元素中的所有需要对比的两个元素，这个函数定义大于（一般返回1）、小于（-1）、等于逻辑（1），最后根据这些比较逻辑排序</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> cmp_to_key</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mycmp</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="comment"># 提取字符中的数字</span></span><br><span class="line">    a = <span class="built_in">int</span>(<span class="string">&#x27;&#x27;</span>.join([i <span class="keyword">for</span> i <span class="keyword">in</span> a <span class="keyword">if</span> i.isdigit()]))</span><br><span class="line">    b = <span class="built_in">int</span>(<span class="string">&#x27;&#x27;</span>.join([i <span class="keyword">for</span> i <span class="keyword">in</span> b <span class="keyword">if</span> i.isdigit()]))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> a &gt; b:</span><br><span class="line">        <span class="built_in">print</span>(a, <span class="string">&quot;vs&quot;</span>, b, <span class="string">&#x27;=&#x27;</span> , <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> a &lt; b:</span><br><span class="line">        <span class="built_in">print</span>(a, <span class="string">&quot;vs&quot;</span>, b, <span class="string">&#x27;=&#x27;</span> , -<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(a, <span class="string">&quot;vs&quot;</span>, b, <span class="string">&#x27;=&#x27;</span> , <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>([<span class="string">&#x27;b29s&#x27;</span>, <span class="string">&#x27;c2s20&#x27;</span>, <span class="string">&#x27;a1-1&#x27;</span>, <span class="string">&#x27;88d&#x27;</span>], key=cmp_to_key(mycmp)))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>([<span class="string">&#x27;b29s&#x27;</span>, <span class="string">&#x27;c2s20&#x27;</span>, <span class="string">&#x27;a1-1&#x27;</span>, <span class="string">&#x27;88d&#x27;</span>], key=<span class="keyword">lambda</span> x: <span class="built_in">int</span>(<span class="string">&#x27;&#x27;</span>.join([i <span class="keyword">for</span> i <span class="keyword">in</span> x <span class="keyword">if</span> i.isdigit()]))))</span><br></pre></td></tr></table></figure>
<pre><code>220 vs 29 = 1
11 vs 220 = -1
11 vs 220 = -1
11 vs 29 = -1
88 vs 29 = 1
88 vs 220 = -1
['a1-1', 'b29s', '88d', 'c2s20']
['a1-1', 'b29s', '88d', 'c2s20']
</code></pre>
<h4 id="缓存"><a class="markdownIt-Anchor" href="#缓存"></a> 缓存</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="comment"># maxsize 设置最大缓存量</span></span><br><span class="line"><span class="comment"># 最近最少使用</span></span><br><span class="line"><span class="meta">@functools.lru_cache()</span></span><br><span class="line"><span class="comment"># @functools.cache()</span></span><br><span class="line"><span class="comment"># cache不需要移出旧值，缓存大小没有限制</span></span><br><span class="line"><span class="comment"># return lru_cache(maxsize=None)(user_function)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">expensive</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="comment"># 参数必须是可散列的</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;expensive(&#123;&#125;, &#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(a, b))</span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line"></span><br><span class="line">MAX = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;First set of calls:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(MAX):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(MAX):</span><br><span class="line">        expensive(i, j)</span><br><span class="line"><span class="built_in">print</span>(expensive.cache_info())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nSecond set of calls:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(MAX + <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(MAX + <span class="number">1</span>):</span><br><span class="line">        expensive(i, j)</span><br><span class="line"><span class="built_in">print</span>(expensive.cache_info())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nClearing cache:&#x27;</span>)</span><br><span class="line">expensive.cache_clear()</span><br><span class="line"><span class="built_in">print</span>(expensive.cache_info())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nThird set of calls:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(MAX):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(MAX):</span><br><span class="line">        expensive(i, j)</span><br><span class="line"><span class="built_in">print</span>(expensive.cache_info())</span><br></pre></td></tr></table></figure>
<pre><code>First set of calls:
expensive(0, 0)
expensive(0, 1)
expensive(1, 0)
expensive(1, 1)
CacheInfo(hits=0, misses=4, maxsize=128, currsize=4)

Second set of calls:
expensive(0, 2)
expensive(1, 2)
expensive(2, 0)
expensive(2, 1)
expensive(2, 2)
CacheInfo(hits=4, misses=9, maxsize=128, currsize=9)

Clearing cache:
CacheInfo(hits=0, misses=0, maxsize=128, currsize=0)

Third set of calls:
expensive(0, 0)
expensive(0, 1)
expensive(1, 0)
expensive(1, 1)
CacheInfo(hits=0, misses=4, maxsize=128, currsize=4)
</code></pre>
<h4 id="缩减"><a class="markdownIt-Anchor" href="#缩减"></a> 缩减</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"><span class="comment"># def reduce(function, iterable, initializer=None):</span></span><br><span class="line"><span class="comment">#     it = iter(iterable)</span></span><br><span class="line"><span class="comment">#     if initializer is None:</span></span><br><span class="line"><span class="comment">#         value = next(it)</span></span><br><span class="line"><span class="comment">#     else:</span></span><br><span class="line"><span class="comment">#         value = initializer</span></span><br><span class="line"><span class="comment">#     for element in it:</span></span><br><span class="line"><span class="comment">#         value = function(value, element)</span></span><br><span class="line"><span class="comment">#     return value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 是计算 ((((1+2)+3)+4)+5) 的值,前缀和</span></span><br><span class="line"><span class="built_in">print</span>(reduce(<span class="keyword">lambda</span> x, y: x+y, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]) )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认参数放第一个initializer</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_reduce</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;do_reduce(&#123;&#125;, &#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(a, b))</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">data = <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"><span class="built_in">print</span>(data)</span><br><span class="line">result = functools.reduce(do_reduce, data, <span class="number">999</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;result: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(result))</span><br></pre></td></tr></table></figure>
<pre><code>15
range(1, 5)
do_reduce(999, 1)
do_reduce(1000, 2)
do_reduce(1002, 3)
do_reduce(1005, 4)
result: 1009
</code></pre>
<h4 id="泛型函数"><a class="markdownIt-Anchor" href="#泛型函数"></a> 泛型函数</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="comment"># 不同的类型进不同的函数,根据参数的第一个参数切换函数</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@functools.singledispatch</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;default myfunc(&#123;!r&#125;)&#x27;</span>.<span class="built_in">format</span>(arg))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@myfunc.register(<span class="params"><span class="built_in">int</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc_int</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;myfunc_int(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(arg))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@myfunc.register(<span class="params"><span class="built_in">list</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc_list</span>(<span class="params">arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;myfunc_list()&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> arg:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(item))</span><br><span class="line"></span><br><span class="line"><span class="meta">@myfunc.register</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfunc_list</span>(<span class="params">arg: <span class="built_in">float</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;myfunc_float(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(arg))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 找不到匹配的类型会计算继承顺序,匹配最近的父类</span></span><br><span class="line">myfunc(<span class="string">&#x27;string argument&#x27;</span>)</span><br><span class="line">myfunc(<span class="number">1</span>)</span><br><span class="line">myfunc(<span class="number">2.3</span>)</span><br><span class="line">myfunc([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])</span><br></pre></td></tr></table></figure>
<pre><code>default myfunc('string argument')
myfunc_int(1)
myfunc_float(2.3)
myfunc_list()
  a
  b
  c
</code></pre>
<h3 id="itertools迭代器函数"><a class="markdownIt-Anchor" href="#itertools迭代器函数"></a> itertools:迭代器函数</h3>
<h4 id="chain"><a class="markdownIt-Anchor" href="#chain"></a> chain</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在消费数据之前不从迭代器生成数据</span></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> chain</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> chain([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">make_iterables_to_chain</span>():</span><br><span class="line">    <span class="keyword">yield</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">    <span class="keyword">yield</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> chain.from_iterable(make_iterables_to_chain()):</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br></pre></td></tr></table></figure>
<pre><code>1 2 3 a b c 
1 2 3 a b c 
</code></pre>
<h4 id="zip_longest"><a class="markdownIt-Anchor" href="#zip_longest"></a> zip_longest</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> zip_longest</span><br><span class="line"></span><br><span class="line">r1 = <span class="built_in">range</span>(<span class="number">3</span>)</span><br><span class="line">r2 = <span class="built_in">range</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;zip stops early:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">zip</span>(r1, r2)))</span><br><span class="line"></span><br><span class="line">r1 = <span class="built_in">range</span>(<span class="number">3</span>)</span><br><span class="line">r2 = <span class="built_in">range</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nzip_longest processes all of the values:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(zip_longest(r1, r2)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(zip_longest(r1, r2,fillvalue=<span class="number">6666</span>)))</span><br></pre></td></tr></table></figure>
<pre><code>zip stops early:
[(0, 0), (1, 1)]

zip_longest processes all of the values:
[(0, 0), (1, 1), (2, None)]
[(0, 0), (1, 1), (2, 6666)]
</code></pre>
<h4 id="islice"><a class="markdownIt-Anchor" href="#islice"></a> islice</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> islice</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Stop at 5:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(<span class="built_in">range</span>(<span class="number">100</span>), <span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Start at 5, Stop at 10:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(<span class="built_in">range</span>(<span class="number">100</span>), <span class="number">5</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;By tens to 100:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> islice(<span class="built_in">range</span>(<span class="number">100</span>), <span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Stop at 5:
0 1 2 3 4 

Start at 5, Stop at 10:
5 6 7 8 9 

By tens to 100:
0 10 20 30 40 50 60 70 80 90 
</code></pre>
<h4 id="tee"><a class="markdownIt-Anchor" href="#tee"></a> tee</h4>
<h4 id="mapstarmap"><a class="markdownIt-Anchor" href="#mapstarmap"></a> map,starmap</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">times_two</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">multiply</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> (x, y, x * y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Doubles:&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">map</span>(times_two, <span class="built_in">range</span>(<span class="number">5</span>)):</span><br><span class="line">    <span class="built_in">print</span>(i,end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nMultiples:&#x27;</span>)</span><br><span class="line">r1 = <span class="built_in">range</span>(<span class="number">5</span>)</span><br><span class="line">r2 = <span class="built_in">range</span>(<span class="number">5</span>, <span class="number">10</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">map</span>(multiply, r1, r2):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:d&#125; * &#123;:d&#125; = &#123;:d&#125;&#x27;</span>.<span class="built_in">format</span>(*i))</span><br><span class="line"><span class="comment"># 只运行完最短的</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nStopping:&#x27;</span>)</span><br><span class="line">r1 = <span class="built_in">range</span>(<span class="number">5</span>)</span><br><span class="line">r2 = <span class="built_in">range</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">map</span>(multiply, r1, r2):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> starmap</span><br><span class="line"><span class="comment"># map 传入的函数为f(x,y) starmap传入的函数为f(*x)</span></span><br><span class="line">values = [(<span class="number">0</span>, <span class="number">5</span>), (<span class="number">1</span>, <span class="number">6</span>), (<span class="number">2</span>, <span class="number">7</span>), (<span class="number">3</span>, <span class="number">8</span>), (<span class="number">4</span>, <span class="number">9</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> starmap(<span class="keyword">lambda</span> x,y: (x*y,x,y), values):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125; * &#123;&#125; = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(*i))</span><br></pre></td></tr></table></figure>
<pre><code>Doubles:
0 2 4 6 8 
Multiples:
0 * 5 = 0
1 * 6 = 6
2 * 7 = 14
3 * 8 = 24
4 * 9 = 36

Stopping:
(0, 0, 0)
(1, 1, 1)
0 * 0 = 5
6 * 1 = 6
14 * 2 = 7
24 * 3 = 8
36 * 4 = 9
</code></pre>
<h4 id="countcyclerepear"><a class="markdownIt-Anchor" href="#countcyclerepear"></a> count,cycle,repear</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> count,repeat,cycle</span><br><span class="line"></span><br><span class="line"><span class="comment"># count无限产生值</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">zip</span>(count(start=<span class="number">1</span>, step=<span class="number">10</span>), [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(*i))</span><br><span class="line"></span><br><span class="line"><span class="comment"># cycle无限重复值 </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">zip</span>(<span class="built_in">range</span>(<span class="number">7</span>), cycle([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>])):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># repear重复n次值,不提供就是无限 </span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> repeat([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], <span class="number">5</span>):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 组合</span></span><br><span class="line"><span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="built_in">zip</span>(count(), repeat(<span class="string">&#x27;over-and-over&#x27;</span>, <span class="number">5</span>)):</span><br><span class="line">    <span class="built_in">print</span>(i, s)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">map</span>(<span class="keyword">lambda</span> x, y: (x, y, x * y), repeat(<span class="number">2</span>), <span class="built_in">range</span>(<span class="number">5</span>)):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:d&#125; * &#123;:d&#125; = &#123;:d&#125;&#x27;</span>.<span class="built_in">format</span>(*i))</span><br></pre></td></tr></table></figure>
<pre><code>1: a
11: b
21: c
(0, 'a')
(1, 'b')
(2, 'c')
(3, 'a')
(4, 'b')
(5, 'c')
(6, 'a')
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
[1, 2, 3, 4]
0 over-and-over
1 over-and-over
2 over-and-over
3 over-and-over
4 over-and-over
2 * 0 = 0
2 * 1 = 2
2 * 2 = 4
2 * 3 = 6
2 * 4 = 8
</code></pre>
<h4 id="dropwhiletakewhilefilterfilterfalsecompress"><a class="markdownIt-Anchor" href="#dropwhiletakewhilefilterfilterfalsecompress"></a> dropwhile,takewhile,filter,filterfalse,compress</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> dropwhile,takewhile,filterfalse,compress</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">should_drop</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Testing:&#x27;</span>, x)</span><br><span class="line">    <span class="keyword">return</span> x &lt; <span class="number">1</span></span><br><span class="line"><span class="comment"># 第一次为false之后的元素都会返回</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> dropwhile(should_drop, [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, -<span class="number">2</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Yielding:&#x27;</span>, i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">should_take</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Testing:&#x27;</span>, x)</span><br><span class="line">    <span class="keyword">return</span> x &lt; <span class="number">2</span></span><br><span class="line"><span class="comment"># 第一次为false之前的元素都会返回,遇见false就不返回了</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> takewhile(should_take, [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, -<span class="number">2</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Yielding:&#x27;</span>, i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只返回true的元素,每一个都会计算</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_item</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Testing:&#x27;</span>, x)</span><br><span class="line">    <span class="keyword">return</span> x &lt; <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">filter</span>(check_item, [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, -<span class="number">2</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Yielding:&#x27;</span>, i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 相反</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">check_item</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Testing:&#x27;</span>, x)</span><br><span class="line">    <span class="keyword">return</span> x &lt; <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> filterfalse(check_item, [-<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, -<span class="number">2</span>]):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Yielding:&#x27;</span>, i)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;------------------------&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据true和false选择数据</span></span><br><span class="line">every_third = cycle([<span class="literal">False</span>, <span class="literal">False</span>, <span class="literal">True</span>])</span><br><span class="line">data = <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> compress(data, every_third):</span><br><span class="line">    <span class="built_in">print</span>(i, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>Testing: -1
Testing: 0
Testing: 1
Yielding: 1
Yielding: 2
Yielding: -2
------------------------
Testing: -1
Yielding: -1
Testing: 0
Yielding: 0
Testing: 1
Yielding: 1
Testing: 2
------------------------
Testing: -1
Yielding: -1
Testing: 0
Yielding: 0
Testing: 1
Testing: 2
Testing: -2
Yielding: -2
------------------------
Testing: -1
Testing: 0
Testing: 1
Yielding: 1
Testing: 2
Yielding: 2
Testing: -2
------------------------
3 6 9 
</code></pre>
<h4 id="groupby"><a class="markdownIt-Anchor" href="#groupby"></a> groupby</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> groupby</span><br><span class="line"></span><br><span class="line">d = <span class="built_in">dict</span>(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">1</span>, d=<span class="number">2</span>, e=<span class="number">1</span>, f=<span class="number">2</span>, g=<span class="number">3</span>)</span><br><span class="line">d = [(<span class="number">1</span>,<span class="number">2</span>),(<span class="number">2</span>,<span class="number">3</span>),(<span class="number">3</span>,<span class="number">4</span>),(<span class="number">4</span>,<span class="number">2</span>)]</span><br><span class="line">di = <span class="built_in">sorted</span>(d, key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">for</span> k, g <span class="keyword">in</span> groupby(di, key=<span class="keyword">lambda</span> x:x[<span class="number">1</span>]):</span><br><span class="line">    <span class="built_in">print</span>(k, <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="keyword">lambda</span> x:x[<span class="number">1</span>], g)))</span><br></pre></td></tr></table></figure>
<pre><code>2 [2, 2]
3 [3]
4 [4]
</code></pre>
<h4 id="accumulate"><a class="markdownIt-Anchor" href="#accumulate"></a> accumulate</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> accumulate</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算累计和</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(accumulate(<span class="built_in">range</span>(<span class="number">5</span>))))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(accumulate(<span class="string">&#x27;abcde&#x27;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(a, b)</span><br><span class="line">    <span class="keyword">return</span> b + a + b</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(accumulate(<span class="string">&#x27;abcde&#x27;</span>, f)))</span><br></pre></td></tr></table></figure>
<pre><code>[0, 1, 3, 6, 10]
['a', 'ab', 'abc', 'abcd', 'abcde']
a b
bab c
cbabc d
dcbabcd e
['a', 'bab', 'cbabc', 'dcbabcd', 'edcbabcde']
</code></pre>
<h4 id="product"><a class="markdownIt-Anchor" href="#product"></a> product</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> product</span><br><span class="line"><span class="comment"># 笛卡尔积</span></span><br><span class="line"></span><br><span class="line">FACE_CARDS = (<span class="string">&#x27;J&#x27;</span>, <span class="string">&#x27;Q&#x27;</span>, <span class="string">&#x27;K&#x27;</span>, <span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">SUITS = (<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;D&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;S&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 顺序由输入顺序决定</span></span><br><span class="line">DECK = <span class="built_in">list</span>(</span><br><span class="line">    product(</span><br><span class="line">        chain(<span class="built_in">range</span>(<span class="number">2</span>, <span class="number">11</span>), FACE_CARDS),</span><br><span class="line">        SUITS,</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> card <span class="keyword">in</span> DECK:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:&gt;2&#125;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(*card), end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> card[<span class="number">1</span>] == SUITS[-<span class="number">1</span>]:</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment"># repear控制几个自身</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">iterable</span>):</span><br><span class="line">    <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(iterable, <span class="number">1</span>):</span><br><span class="line">        <span class="built_in">print</span>(item, end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">3</span>) == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>()</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Repeat 2:\n&#x27;</span>)</span><br><span class="line">show(<span class="built_in">list</span>(product(<span class="built_in">range</span>(<span class="number">3</span>), repeat=<span class="number">2</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Repeat 3:\n&#x27;</span>)</span><br><span class="line">show(<span class="built_in">list</span>(product(<span class="built_in">range</span>(<span class="number">3</span>), repeat=<span class="number">3</span>)))</span><br></pre></td></tr></table></figure>
<pre><code> 2H  2D  2C  2S 
 3H  3D  3C  3S 
 4H  4D  4C  4S 
 5H  5D  5C  5S 
 6H  6D  6C  6S 
 7H  7D  7C  7S 
 8H  8D  8C  8S 
 9H  9D  9C  9S 
10H 10D 10C 10S 
 JH  JD  JC  JS 
 QH  QD  QC  QS 
 KH  KD  KC  KS 
 AH  AD  AC  AS 
Repeat 2:

(0, 0) (0, 1) (0, 2) 
(1, 0) (1, 1) (1, 2) 
(2, 0) (2, 1) (2, 2) 

Repeat 3:

(0, 0, 0) (0, 0, 1) (0, 0, 2) 
(0, 1, 0) (0, 1, 1) (0, 1, 2) 
(0, 2, 0) (0, 2, 1) (0, 2, 2) 
(1, 0, 0) (1, 0, 1) (1, 0, 2) 
(1, 1, 0) (1, 1, 1) (1, 1, 2) 
(1, 2, 0) (1, 2, 1) (1, 2, 2) 
(2, 0, 0) (2, 0, 1) (2, 0, 2) 
(2, 1, 0) (2, 1, 1) (2, 1, 2) 
(2, 2, 0) (2, 2, 1) (2, 2, 2) 
</code></pre>
<h4 id="permutationscombinations"><a class="markdownIt-Anchor" href="#permutationscombinations"></a> permutations,combinations</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations,combinations,combinations_with_replacement</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">iterable</span>):</span><br><span class="line">    first = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">for</span> i, item <span class="keyword">in</span> <span class="built_in">enumerate</span>(iterable, <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> first != item[<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">if</span> first <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="built_in">print</span>()</span><br><span class="line">            first = item[<span class="number">0</span>]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&#x27;</span>.join(item), end=<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排列</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;All permutations:\n&#x27;</span>)</span><br><span class="line">show(permutations(<span class="string">&#x27;abcd&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nPairs:\n&#x27;</span>)</span><br><span class="line">show(permutations(<span class="string">&#x27;abcd&#x27;</span>, r=<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 组合</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nUnique pairs:\n&#x27;</span>)</span><br><span class="line">show(combinations(<span class="string">&#x27;abcd&#x27;</span>, r=<span class="number">2</span>))</span><br><span class="line"><span class="comment"># 包含自身</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\nUnique pairs:\n&#x27;</span>)</span><br><span class="line">show(combinations_with_replacement(<span class="string">&#x27;abcd&#x27;</span>, r=<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<pre><code>All permutations:

abcd abdc acbd acdb adbc adcb 
bacd badc bcad bcda bdac bdca 
cabd cadb cbad cbda cdab cdba 
dabc dacb dbac dbca dcab dcba 

Pairs:

ab ac ad 
ba bc bd 
ca cb cd 
da db dc 

Unique pairs:

ab ac ad 
bc bd 
cd 

Unique pairs:

aa ab ac ad 
bb bc bd 
cc cd 
dd 
</code></pre>
<h3 id="operator内置操作符的函数结构"><a class="markdownIt-Anchor" href="#operator内置操作符的函数结构"></a> operator:内置操作符的函数结构</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字的函数实现</span></span><br><span class="line"></span><br><span class="line">a = -<span class="number">1</span></span><br><span class="line">b = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;a =&#x27;</span>, a)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;b =&#x27;</span>, b)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;not_(a)     :&#x27;</span>, not_(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;truth(a)    :&#x27;</span>, truth(a))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;is_(a, b)   :&#x27;</span>, is_(a, b))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;is_not(a, b):&#x27;</span>, is_not(a, b))</span><br><span class="line"><span class="keyword">for</span> func <span class="keyword">in</span> (lt, le, eq, ne, ge, gt):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;(a, b): &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(func.__name__, func(a, b)))</span><br></pre></td></tr></table></figure>
<pre><code>a = -1
b = 5

not_(a)     : False
truth(a)    : True
is_(a, b)   : False
is_not(a, b): True
lt(a, b): True
le(a, b): True
eq(a, b): False
ne(a, b): True
ge(a, b): False
gt(a, b): False
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyObj</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;example class for attrgetter&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, arg</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        self.arg = arg</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;MyObj(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(self.arg)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">l = [MyObj(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;objects   :&#x27;</span>, l)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Extract the &#x27;arg&#x27; value from each object</span></span><br><span class="line">g = attrgetter(<span class="string">&#x27;arg&#x27;</span>)</span><br><span class="line">vals = [g(i) <span class="keyword">for</span> i <span class="keyword">in</span> l]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;arg values:&#x27;</span>, vals)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sort using arg</span></span><br><span class="line">l.reverse()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;reversed  :&#x27;</span>, l)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;sorted    :&#x27;</span>, <span class="built_in">sorted</span>(l, key=g))</span><br></pre></td></tr></table></figure>
<pre><code>objects   : [MyObj(0), MyObj(1), MyObj(2), MyObj(3), MyObj(4)]
arg values: [0, 1, 2, 3, 4]
reversed  : [MyObj(4), MyObj(3), MyObj(2), MyObj(1), MyObj(0)]
sorted    : [MyObj(0), MyObj(1), MyObj(2), MyObj(3), MyObj(4)]
</code></pre>
<h3 id="contextlib上下文管理器工具"><a class="markdownIt-Anchor" href="#contextlib上下文管理器工具"></a> contextlib:上下文管理器工具</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WithinContext</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, context</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;WithinContext.__init__(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(context))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">do_something</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;WithinContext.do_something()&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__del__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;WithinContext.__del__&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Context</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, handle_error</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;__init__(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(handle_error))</span><br><span class="line">        self.handle_error = handle_error</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Context.__enter__()&#x27;</span>)</span><br><span class="line">        <span class="comment"># 此处返回作为as使用</span></span><br><span class="line">        <span class="keyword">return</span> WithinContext(self)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;__exit__()&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  exc_type =&#x27;</span>, exc_type)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  exc_val  =&#x27;</span>, exc_val)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  exc_tb   =&#x27;</span>, exc_tb)</span><br><span class="line">        <span class="comment"># 返回true就不继续传递,返回false继续传递</span></span><br><span class="line">        <span class="keyword">return</span> self.handle_error</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Context(<span class="literal">False</span>) <span class="keyword">as</span> c:</span><br><span class="line">    c.do_something()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;---------------&#x27;</span>)</span><br><span class="line"><span class="keyword">with</span> Context(<span class="literal">True</span>):</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(<span class="string">&#x27;error message handled&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>__init__(False)
Context.__enter__()
WithinContext.__init__(&lt;__main__.Context object at 0x0000021B997DA3D0&gt;)
WithinContext.__del__
WithinContext.do_something()
__exit__()
  exc_type = None
  exc_val  = None
  exc_tb   = None
---------------
__init__(True)
Context.__enter__()
WithinContext.__init__(&lt;__main__.Context object at 0x0000021B997DA3D0&gt;)
WithinContext.__del__
__exit__()
  exc_type = &lt;class 'RuntimeError'&gt;
  exc_val  = error message handled
  exc_tb   = &lt;traceback object at 0x0000021B998C7D80&gt;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">timethis</span>(<span class="params">label</span>):</span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="comment"># yield 之前的代码会在上下文管理器中作为 __enter__() 方法执行</span></span><br><span class="line">    <span class="comment"># 所有在 yield 之后的代码会作为 __exit__() 方法执行</span></span><br><span class="line">    <span class="comment"># 如果出现了异常，异常会在yield语句那里抛出。</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        end = time.time()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(label, end - start))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Example use</span></span><br><span class="line"><span class="keyword">with</span> timethis(<span class="string">&#x27;counting&#x27;</span>):</span><br><span class="line">    n = <span class="number">10000000</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        n -= <span class="number">1</span></span><br></pre></td></tr></table></figure>
<pre><code>counting: 0.678372859954834
</code></pre>
<h2 id="日期和时间"><a class="markdownIt-Anchor" href="#日期和时间"></a> 日期和时间</h2>
<h3 id="time"><a class="markdownIt-Anchor" href="#time"></a> time</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 报告系统挂钟时间,返回某一时刻的秒数</span></span><br><span class="line"><span class="built_in">print</span>(time.time())</span><br><span class="line"></span><br><span class="line"><span class="comment"># monotonic()递增函数,time可能因为系统时间后退</span></span><br><span class="line"><span class="comment"># monotonic的起始时间无意义,主要是差值</span></span><br><span class="line"><span class="built_in">print</span>(time.monotonic())</span><br><span class="line"></span><br><span class="line"><span class="comment"># perf_counter高分辨率时钟</span></span><br><span class="line"><span class="built_in">print</span>(time.perf_counter())</span><br><span class="line"></span><br><span class="line"><span class="comment"># process_time处理器处理时间</span></span><br><span class="line"><span class="built_in">print</span>(time.process_time())</span><br><span class="line"></span><br><span class="line"><span class="comment"># ctime 返回人能看懂的时间字符串,默认返回当前时间</span></span><br><span class="line"><span class="built_in">print</span>(time.ctime())</span><br><span class="line"><span class="built_in">print</span>(time.ctime(time.time()+<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回当前时间的结构化时间</span></span><br><span class="line"><span class="built_in">print</span>(time.localtime())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回UTC时区的结构化时间</span></span><br><span class="line"><span class="built_in">print</span>(time.gmtime())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 把结构化时间转化为浮点秒数</span></span><br><span class="line"><span class="built_in">print</span>(time.mktime(time.localtime()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 处理时区问题</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串时间转为结构化时间</span></span><br><span class="line"><span class="built_in">print</span>(time.strptime(time.ctime()))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 结构化时间转化为指定格式</span></span><br><span class="line"><span class="built_in">print</span>(time.strftime(<span class="string">r&quot;%Y-%m-%d %H:%M:%S&quot;</span>,time.localtime()))</span><br></pre></td></tr></table></figure>
<pre><code>1678199761.7579758
951660.75
644.1160248
3.59375
Tue Mar  7 22:36:01 2023
Tue Mar  7 22:36:21 2023
time.struct_time(tm_year=2023, tm_mon=3, tm_mday=7, tm_hour=22, tm_min=36, tm_sec=1, tm_wday=1, tm_yday=66, tm_isdst=0)
time.struct_time(tm_year=2023, tm_mon=3, tm_mday=7, tm_hour=14, tm_min=36, tm_sec=1, tm_wday=1, tm_yday=66, tm_isdst=0)
1678199761.0
time.struct_time(tm_year=2023, tm_mon=3, tm_mday=7, tm_hour=22, tm_min=36, tm_sec=1, tm_wday=1, tm_yday=66, tm_isdst=-1)
2023-03-07 22:36:01
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> textwrap</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">available_clocks = [</span><br><span class="line">    (<span class="string">&#x27;monotonic&#x27;</span>, time.monotonic),</span><br><span class="line">    (<span class="string">&#x27;perf_counter&#x27;</span>, time.perf_counter),</span><br><span class="line">    (<span class="string">&#x27;process_time&#x27;</span>, time.process_time),</span><br><span class="line">    (<span class="string">&#x27;time&#x27;</span>, time.time),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> clock_name, func <span class="keyword">in</span> available_clocks:</span><br><span class="line">    <span class="built_in">print</span>(textwrap.dedent(<span class="string">&#x27;&#x27;&#x27;\</span></span><br><span class="line"><span class="string">    &#123;name&#125;:</span></span><br><span class="line"><span class="string">        adjustable    : &#123;info.adjustable&#125;</span></span><br><span class="line"><span class="string">        implementation: &#123;info.implementation&#125;</span></span><br><span class="line"><span class="string">        monotonic     : &#123;info.monotonic&#125;</span></span><br><span class="line"><span class="string">        resolution    : &#123;info.resolution&#125;</span></span><br><span class="line"><span class="string">        current       : &#123;current&#125;</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span>).<span class="built_in">format</span>(</span><br><span class="line">        name=clock_name,</span><br><span class="line">        info=time.get_clock_info(clock_name),</span><br><span class="line">        current=func())</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<pre><code>monotonic:
    adjustable    : False
    implementation: GetTickCount64()
    monotonic     : True
    resolution    : 0.015625
    current       : 951073.281

perf_counter:
    adjustable    : False
    implementation: QueryPerformanceCounter()
    monotonic     : True
    resolution    : 1e-07
    current       : 56.6460748

process_time:
    adjustable    : False
    implementation: GetProcessTimes()
    monotonic     : True
    resolution    : 1e-07
    current       : 2.59375

time:
    adjustable    : True
    implementation: GetSystemTimeAsFileTime()
    monotonic     : False
    resolution    : 0.015625
    current       : 1678199174.288961
</code></pre>
<h3 id="datetime"><a class="markdownIt-Anchor" href="#datetime"></a> datetime</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># 获取年月日等</span></span><br><span class="line">today = datetime.date.today()</span><br><span class="line"><span class="built_in">print</span>(today)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ctime  :&#x27;</span>, today.ctime())</span><br><span class="line">tt = today.timetuple()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;tuple  : tm_year  =&#x27;</span>, tt.tm_year)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_mon   =&#x27;</span>, tt.tm_mon)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_mday  =&#x27;</span>, tt.tm_mday)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_hour  =&#x27;</span>, tt.tm_hour)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_min   =&#x27;</span>, tt.tm_min)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_sec   =&#x27;</span>, tt.tm_sec)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_wday  =&#x27;</span>, tt.tm_wday)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_yday  =&#x27;</span>, tt.tm_yday)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;         tm_isdst =&#x27;</span>, tt.tm_isdst)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ordinal:&#x27;</span>, today.toordinal())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Year   :&#x27;</span>, today.year)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Mon    :&#x27;</span>, today.month)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Day    :&#x27;</span>, today.day)</span><br></pre></td></tr></table></figure>
<pre><code>2023-03-07
ctime  : Tue Mar  7 00:00:00 2023
tuple  : tm_year  = 2023
         tm_mon   = 3
         tm_mday  = 7
         tm_hour  = 0
         tm_min   = 0
         tm_sec   = 0
         tm_wday  = 1
         tm_yday  = 66
         tm_isdst = -1
ordinal: 738586
Year   : 2023
Mon    : 3
Day    : 7
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 根据天数返回日期</span></span><br><span class="line">o = <span class="number">733114</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;o               :&#x27;</span>, o)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;fromordinal(o)  :&#x27;</span>, datetime.date.fromordinal(o))</span><br><span class="line"></span><br><span class="line">t = time.time()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;t               :&#x27;</span>, t)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;fromtimestamp(t):&#x27;</span>, datetime.date.fromtimestamp(t))</span><br></pre></td></tr></table></figure>
<pre><code>o               : 733114
fromordinal(o)  : 2008-03-13
t               : 1678199846.9677696
fromtimestamp(t): 2023-03-07
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取时间对应秒数</span></span><br><span class="line"><span class="keyword">for</span> delta <span class="keyword">in</span> [datetime.timedelta(microseconds=<span class="number">1</span>),</span><br><span class="line">              datetime.timedelta(milliseconds=<span class="number">1</span>),</span><br><span class="line">              datetime.timedelta(seconds=<span class="number">1</span>),</span><br><span class="line">              datetime.timedelta(minutes=<span class="number">1</span>),</span><br><span class="line">              datetime.timedelta(hours=<span class="number">1</span>),</span><br><span class="line">              datetime.timedelta(days=<span class="number">1</span>),</span><br><span class="line">              datetime.timedelta(weeks=<span class="number">1</span>),</span><br><span class="line">              ]:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:15&#125; = &#123;:8&#125; seconds&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        <span class="built_in">str</span>(delta), delta.total_seconds())</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<pre><code>0:00:00.000001  =    1e-06 seconds
0:00:00.001000  =    0.001 seconds
0:00:01         =      1.0 seconds
0:01:00         =     60.0 seconds
1:00:00         =   3600.0 seconds
1 day, 0:00:00  =  86400.0 seconds
7 days, 0:00:00 = 604800.0 seconds
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># 时间的计算</span></span><br><span class="line">today = datetime.date.today()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Today    :&#x27;</span>, today)</span><br><span class="line"></span><br><span class="line">one_day = datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;One day  :&#x27;</span>, one_day)</span><br><span class="line"></span><br><span class="line">yesterday = today - one_day</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Yesterday:&#x27;</span>, yesterday)</span><br><span class="line"></span><br><span class="line">tomorrow = today + one_day</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Tomorrow :&#x27;</span>, tomorrow)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;tomorrow - yesterday:&#x27;</span>, tomorrow - yesterday)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;yesterday - tomorrow:&#x27;</span>, yesterday - tomorrow)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 时间比较</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Times:&#x27;</span>)</span><br><span class="line">t1 = datetime.time(<span class="number">12</span>, <span class="number">55</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  t1:&#x27;</span>, t1)</span><br><span class="line">t2 = datetime.time(<span class="number">13</span>, <span class="number">5</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  t2:&#x27;</span>, t2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  t1 &lt; t2:&#x27;</span>, t1 &lt; t2)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Dates:&#x27;</span>)</span><br><span class="line">d1 = datetime.date.today()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  d1:&#x27;</span>, d1)</span><br><span class="line">d2 = datetime.date.today() + datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  d2:&#x27;</span>, d2)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;  d1 &gt; d2:&#x27;</span>, d1 &gt; d2)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># 时间和日期组合在一起</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Now    :&#x27;</span>, datetime.datetime.now())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Today  :&#x27;</span>, datetime.datetime.today())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;UTC Now:&#x27;</span>, datetime.datetime.utcnow())</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line">FIELDS = [</span><br><span class="line">    <span class="string">&#x27;year&#x27;</span>, <span class="string">&#x27;month&#x27;</span>, <span class="string">&#x27;day&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;hour&#x27;</span>, <span class="string">&#x27;minute&#x27;</span>, <span class="string">&#x27;second&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;microsecond&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">d = datetime.datetime.now()</span><br><span class="line"><span class="keyword">for</span> attr <span class="keyword">in</span> FIELDS:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:15&#125;: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(attr, <span class="built_in">getattr</span>(d, attr)))</span><br></pre></td></tr></table></figure>
<pre><code>Now    : 2023-03-07 22:41:14.718075
Today  : 2023-03-07 22:41:14.718076
UTC Now: 2023-03-07 14:41:14.718075

year           : 2023
month          : 3
day            : 7
hour           : 22
minute         : 41
second         : 14
microsecond    : 719073
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment"># 日期格式化</span></span><br><span class="line"><span class="built_in">format</span> = <span class="string">&quot;%a %b %d %H:%M:%S %Y&quot;</span></span><br><span class="line"></span><br><span class="line">today = datetime.datetime.today()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ISO     :&#x27;</span>, today)</span><br><span class="line"></span><br><span class="line">s = today.strftime(<span class="built_in">format</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;strftime:&#x27;</span>, s)</span><br><span class="line"></span><br><span class="line">d = datetime.datetime.strptime(s, <span class="built_in">format</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;strptime:&#x27;</span>, d.strftime(<span class="built_in">format</span>))</span><br></pre></td></tr></table></figure>
<pre><code>ISO     : 2023-03-07 22:40:31.254463
strftime: Tue Mar 07 22:40:31 2023
strptime: Tue Mar 07 22:40:31 2023
</code></pre>
<h3 id="日期操作"><a class="markdownIt-Anchor" href="#日期操作"></a> 日期操作</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line"><span class="comment"># 设置星期一是第一天还是星期天是第一天</span></span><br><span class="line">c = calendar.TextCalendar(calendar.MONDAY)</span><br><span class="line">c.prmonth(<span class="number">2023</span>, <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<pre><code>     March 2023
Mo Tu We Th Fr Sa Su
       1  2  3  4  5
 6  7  8  9 10 11 12
13 14 15 16 17 18 19
20 21 22 23 24 25 26
27 28 29 30 31
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line"><span class="keyword">import</span> pprint</span><br><span class="line"></span><br><span class="line">pprint.pprint(calendar.monthcalendar(<span class="number">2023</span>, <span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[[0, 0, 1, 2, 3, 4, 5],
 [6, 7, 8, 9, 10, 11, 12],
 [13, 14, 15, 16, 17, 18, 19],
 [20, 21, 22, 23, 24, 25, 26],
 [27, 28, 29, 30, 31, 0, 0]]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># jupyter nbconvert --to markdown ***.ipynb</span></span><br><span class="line"><span class="comment"># ipynb-&gt;markdown</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://gladdduck.github.io/2023/03/30/python3lib-1/" title="python标准库-1" target="_blank" rel="external">https://gladdduck.github.io/2023/03/30/python3lib-1/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/gladdduck" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/gladdduck" target="_blank"><span class="text-dark">gladdduck</span><small class="ml-1x"></small></a></h3>
        <div>个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
           
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2023/03/30/python3lib-2/" title="python标准库-2"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2023/03/30/%E9%85%8D%E7%BD%AE%E8%85%BE%E8%AE%AF%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="(no title)"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn " data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">    <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.jpg" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>





</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/gladdduck" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <!-- <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> -->
  <script src="//cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '644a1091cfd20b8f33ef',
    clientSecret: '4c5cc91dbfe067c804fcef958817d41acc9ba545',
    repo: 'gladdduck.github.io',
    owner: 'gladdduck',
    admin: ['gladdduck'],
    id: md5(location.pathname),
    distractionFreeMode: true,
    language: 'zh-CN',
    enableHotKey: '',
    proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token',
  })
  gitalk.render('comments')
  </script>
      







</body>
</html>