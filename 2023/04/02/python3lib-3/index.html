<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>python标准库-3 | Gladdduck</title>
  <meta name="description" content="网络通信  ipaddress 12import ipaddress# ipaddress:解析ip地址  socket 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465import socket# 网络">
<meta property="og:type" content="article">
<meta property="og:title" content="python标准库-3">
<meta property="og:url" content="https://gladdduck.github.io/2023/04/02/python3lib-3/index.html">
<meta property="og:site_name" content="Gladdduck">
<meta property="og:description" content="网络通信  ipaddress 12import ipaddress# ipaddress:解析ip地址  socket 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465import socket# 网络">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://image.yayan.xyz/20230328215242.png">
<meta property="og:image" content="https://image.yayan.xyz/20230330103900.png">
<meta property="article:published_time" content="2023-04-02T03:24:30.616Z">
<meta property="article:modified_time" content="2023-04-02T03:25:48.386Z">
<meta property="article:author" content="syxue">
<meta property="article:tag" content="python3 标准库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://image.yayan.xyz/20230328215242.png">
  <!-- Canonical links -->
  <link rel="canonical" href="https://gladdduck.github.io/2023/04/02/python3lib-3/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Gladdduck" type="application/atom+xml">
  
  
    <link rel="icon" href="/icon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1.4.0/dist/gitalk.min.css">
  
<meta name="generator" content="Hexo 5.4.2"></head>


<body class="main-center theme-purple" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/gladdduck" target="_blank">
          <img class="img-circle img-rotate" src="/images/icon.png" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Gladdduck</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">KB Master</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Suzhou, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/gladdduck" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>自己JB的记录</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AE/">hexo博客配置</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/">快捷命令</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E9%85%8D%E7%BD%AE/">杂七杂八配置</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95/">论文记录</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BingChat/" rel="tag">BingChat</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blazor/" rel="tag">Blazor</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BlazorLocalization/" rel="tag">BlazorLocalization</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSharp/" rel="tag">CSharp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cypher/" rel="tag">Cypher</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dataloader/" rel="tag">Dataloader</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dataset/" rel="tag">Dataset</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Few-shotObjectDetection/" rel="tag">Few-shotObjectDetection</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" rel="tag">Linux快捷命令</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Neo4j%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" rel="tag">Neo4j快捷命令</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PaddleOCRSharp/" rel="tag">PaddleOCRSharp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">Python学习笔记</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sampler/" rel="tag">Sampler</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS2022/" rel="tag">VS2022</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VSCode-Github/" rel="tag">VSCode Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vscode-%E9%98%BF%E9%87%8C%E4%BA%91/" rel="tag">Vscode 阿里云</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zero-shot-Detection/" rel="tag">Zero-shot Detection</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/collate-fn/" rel="tag">collate_fn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git-Time-out/" rel="tag">git Time out</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEgitalk/" rel="tag">hexo博客配置gitalk</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpicgo/" rel="tag">hexo博客配置picgo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpure/" rel="tag">hexo博客配置pure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mmfewshot/" rel="tag">mmfewshot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/neo4j%E5%AE%89%E8%A3%85/" rel="tag">neo4j安装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python3-%E6%A0%87%E5%87%86%E5%BA%93/" rel="tag">python3 标准库</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9E%83%E5%9C%BE%E6%A3%80%E6%B5%8B/" rel="tag">垃圾检测</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">多个域名访问同一个服务器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" rel="tag">快捷键</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/" rel="tag">快速傅里叶变换</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">排序算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" rel="tag">搭建博客</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%BC%9A%E8%AE%AE/" rel="tag">目标检测会议</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E8%A1%A8%E7%A4%BA/" rel="tag">知识图谱表示</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/" rel="tag">知识点</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" rel="tag">算法刷题笔记</a><span class="tag-list-count">5</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/BingChat/" style="font-size: 13px;">BingChat</a> <a href="/tags/Blazor/" style="font-size: 13px;">Blazor</a> <a href="/tags/BlazorLocalization/" style="font-size: 13px;">BlazorLocalization</a> <a href="/tags/CSharp/" style="font-size: 13px;">CSharp</a> <a href="/tags/Cypher/" style="font-size: 13px;">Cypher</a> <a href="/tags/Dataloader/" style="font-size: 13px;">Dataloader</a> <a href="/tags/Dataset/" style="font-size: 13px;">Dataset</a> <a href="/tags/Few-shotObjectDetection/" style="font-size: 13px;">Few-shotObjectDetection</a> <a href="/tags/Git/" style="font-size: 13px;">Git</a> <a href="/tags/Hexo/" style="font-size: 13px;">Hexo</a> <a href="/tags/Linux%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" style="font-size: 13px;">Linux快捷命令</a> <a href="/tags/Neo4j%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/" style="font-size: 13px;">Neo4j快捷命令</a> <a href="/tags/PaddleOCRSharp/" style="font-size: 13px;">PaddleOCRSharp</a> <a href="/tags/Python%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 13.67px;">Python学习笔记</a> <a href="/tags/Sampler/" style="font-size: 13px;">Sampler</a> <a href="/tags/VS2022/" style="font-size: 13px;">VS2022</a> <a href="/tags/VSCode-Github/" style="font-size: 13px;">VSCode Github</a> <a href="/tags/Vscode-%E9%98%BF%E9%87%8C%E4%BA%91/" style="font-size: 13px;">Vscode 阿里云</a> <a href="/tags/Zero-shot-Detection/" style="font-size: 13px;">Zero-shot Detection</a> <a href="/tags/collate-fn/" style="font-size: 13px;">collate_fn</a> <a href="/tags/git-Time-out/" style="font-size: 13px;">git Time out</a> <a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEgitalk/" style="font-size: 13px;">hexo博客配置gitalk</a> <a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpicgo/" style="font-size: 13px;">hexo博客配置picgo</a> <a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E9%85%8D%E7%BD%AEpure/" style="font-size: 13px;">hexo博客配置pure</a> <a href="/tags/mmfewshot/" style="font-size: 13px;">mmfewshot</a> <a href="/tags/neo4j%E5%AE%89%E8%A3%85/" style="font-size: 13px;">neo4j安装</a> <a href="/tags/python3-%E6%A0%87%E5%87%86%E5%BA%93/" style="font-size: 13.67px;">python3 标准库</a> <a href="/tags/%E5%9E%83%E5%9C%BE%E6%A3%80%E6%B5%8B/" style="font-size: 13px;">垃圾检测</a> <a href="/tags/%E5%A4%9A%E4%B8%AA%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE%E5%90%8C%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 13px;">多个域名访问同一个服务器</a> <a href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 13px;">快捷键</a> <a href="/tags/%E5%BF%AB%E9%80%9F%E5%82%85%E9%87%8C%E5%8F%B6%E5%8F%98%E6%8D%A2/" style="font-size: 13px;">快速傅里叶变换</a> <a href="/tags/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" style="font-size: 13px;">排序算法</a> <a href="/tags/%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/" style="font-size: 13.33px;">搭建博客</a> <a href="/tags/%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E4%BC%9A%E8%AE%AE/" style="font-size: 13px;">目标检测会议</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E8%A1%A8%E7%A4%BA/" style="font-size: 13px;">知识图谱表示</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E7%82%B9/" style="font-size: 13px;">知识点</a> <a href="/tags/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E7%AC%94%E8%AE%B0/" style="font-size: 14px;">算法刷题笔记</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/06/">六月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/2023/12/10/mmfewshot%E9%85%8D%E7%BD%AE/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E9%85%8D%E7%BD%AE/">杂七杂八配置</a>
              </p>
              <p class="item-title">
                <a href="/2023/12/10/mmfewshot%E9%85%8D%E7%BD%AE/" class="title">mmfewshot配置</a>
              </p>
              <p class="item-date">
                <time datetime="2023-12-10T07:46:36.918Z" itemprop="datePublished">2023-12-10</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/12/03/Hexo%E5%8D%9A%E5%AE%A2%E5%8F%82%E6%95%B0%E8%AE%B0%E5%BD%95/" class="thumb">
    
    
        <span style="background-image:url(https://image.yayan.xyz/小鸭子.png)" alt="Hexo博客参数记录" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB%E9%85%8D%E7%BD%AE/">杂七杂八配置</a>
              </p>
              <p class="item-title">
                <a href="/2023/12/03/Hexo%E5%8D%9A%E5%AE%A2%E5%8F%82%E6%95%B0%E8%AE%B0%E5%BD%95/" class="title">Hexo博客参数记录</a>
              </p>
              <p class="item-date">
                <time datetime="2023-12-03T05:54:00.181Z" itemprop="datePublished">2023-12-03</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/11/24/Few-shotDetection%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93/" class="thumb">
    
    
        <span style="background-image:url(https://image.yayan.xyz/小鸭子.png)" alt="Few-shot Object Detection论文总结" class="thumb-image"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E8%AE%BA%E6%96%87%E8%AE%B0%E5%BD%95/">论文记录</a>
              </p>
              <p class="item-title">
                <a href="/2023/11/24/Few-shotDetection%E8%AE%BA%E6%96%87%E6%80%BB%E7%BB%93/" class="title">Few-shot Object Detection论文总结</a>
              </p>
              <p class="item-date">
                <time datetime="2023-11-24T12:54:49.892Z" itemprop="datePublished">2023-11-24</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/11/24/C#%E7%9F%A5%E8%AF%86%E7%82%B9/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%BF%AB%E6%8D%B7%E5%91%BD%E4%BB%A4/">快捷命令</a>
              </p>
              <p class="item-title">
                <a href="/2023/11/24/C#%E7%9F%A5%E8%AF%86%E7%82%B9/" class="title">C#学习中的小知识点</a>
              </p>
              <p class="item-date">
                <time datetime="2023-11-24T12:54:49.890Z" itemprop="datePublished">2023-11-24</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/2023/11/24/C#%E4%BD%BF%E7%94%A8PaddleOCRSharp/" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
              </p>
              <p class="item-title">
                <a href="/2023/11/24/C#%E4%BD%BF%E7%94%A8PaddleOCRSharp/" class="title">C#使用PaddleOCRSharp</a>
              </p>
              <p class="item-date">
                <time datetime="2023-11-24T12:54:49.886Z" itemprop="datePublished">2023-11-24</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
  <aside class="sidebar sidebar-toc collapse   in  " id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1"><span class="toc-number">1.</span> <span class="toc-text"> 网络通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ipaddress"><span class="toc-number">1.1.</span> <span class="toc-text"> ipaddress</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#socket"><span class="toc-number">1.2.</span> <span class="toc-text"> socket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#selectors"><span class="toc-number">1.3.</span> <span class="toc-text"> selectors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select"><span class="toc-number">1.4.</span> <span class="toc-text"> select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#socketserver"><span class="toc-number">1.5.</span> <span class="toc-text"> socketserver</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91"><span class="toc-number">2.</span> <span class="toc-text"> 互联网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#urllibparase"><span class="toc-number">2.1.</span> <span class="toc-text"> urllib.parase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#urllibrequest"><span class="toc-number">2.2.</span> <span class="toc-text"> urllib.request</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#urllibrobotparser"><span class="toc-number">2.3.</span> <span class="toc-text"> urllib.robotparser</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#base64"><span class="toc-number">2.4.</span> <span class="toc-text"> base64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#httpserver"><span class="toc-number">2.5.</span> <span class="toc-text"> http.server</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#httpcookie"><span class="toc-number">2.6.</span> <span class="toc-text"> http.cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webbrowser"><span class="toc-number">2.7.</span> <span class="toc-text"> webbrowser</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uuid"><span class="toc-number">2.8.</span> <span class="toc-text"> uuid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json"><span class="toc-number">2.9.</span> <span class="toc-text"> json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#email"><span class="toc-number">3.</span> <span class="toc-text"> email</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text"> 应用构建模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#argparse"><span class="toc-number">4.1.</span> <span class="toc-text"> argparse</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getopt"><span class="toc-number">4.2.</span> <span class="toc-text"> getopt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#readline"><span class="toc-number">4.3.</span> <span class="toc-text"> readline</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getpass"><span class="toc-number">4.4.</span> <span class="toc-text"> getpass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cmd"><span class="toc-number">4.5.</span> <span class="toc-text"> cmd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shlex"><span class="toc-number">4.6.</span> <span class="toc-text"> shlex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configparser"><span class="toc-number">4.7.</span> <span class="toc-text"> configparser</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logging"><span class="toc-number">4.8.</span> <span class="toc-text"> logging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fileinput"><span class="toc-number">4.9.</span> <span class="toc-text"> fileinput</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#atexit"><span class="toc-number">4.10.</span> <span class="toc-text"> atexit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sched"><span class="toc-number">4.11.</span> <span class="toc-text"> sched</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BD%E9%99%85%E5%8C%96%E5%92%8C%E6%9C%AC%E5%9C%B0%E5%8C%96"><span class="toc-number">5.</span> <span class="toc-text"> 国际化和本地化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7"><span class="toc-number">6.</span> <span class="toc-text"> 开发工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pydoc"><span class="toc-number">6.1.</span> <span class="toc-text"> pydoc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#doctest"><span class="toc-number">6.2.</span> <span class="toc-text"> doctest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unittest"><span class="toc-number">6.3.</span> <span class="toc-text"> unittest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#trace"><span class="toc-number">6.4.</span> <span class="toc-text"> trace</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#traceback"><span class="toc-number">6.5.</span> <span class="toc-text"> traceback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cgitb"><span class="toc-number">6.6.</span> <span class="toc-text"> cgitb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pdb"><span class="toc-number">6.7.</span> <span class="toc-text"> pdb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#profile-pstats"><span class="toc-number">6.8.</span> <span class="toc-text"> profile &amp; pstats</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeit"><span class="toc-number">6.9.</span> <span class="toc-text"> timeit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabnanny"><span class="toc-number">6.10.</span> <span class="toc-text"> tabnanny</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compileall"><span class="toc-number">6.11.</span> <span class="toc-text"> compileall</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#venv"><span class="toc-number">6.12.</span> <span class="toc-text"> venv</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%97%B6%E7%89%B9%E6%80%A7"><span class="toc-number">7.</span> <span class="toc-text"> 运行时特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#site"><span class="toc-number">7.1.</span> <span class="toc-text"> site</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sys"><span class="toc-number">7.2.</span> <span class="toc-text"> sys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#os"><span class="toc-number">7.3.</span> <span class="toc-text"> os</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#platform"><span class="toc-number">7.4.</span> <span class="toc-text"> platform</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resource"><span class="toc-number">7.5.</span> <span class="toc-text"> resource</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gc"><span class="toc-number">7.6.</span> <span class="toc-text"> gc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sysconfig"><span class="toc-number">7.7.</span> <span class="toc-text"> sysconfig</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E8%A8%80%E5%B7%A5%E5%85%B7"><span class="toc-number">8.</span> <span class="toc-text"> 语言工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#warnings"><span class="toc-number">9.</span> <span class="toc-text"> warnings</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#abc"><span class="toc-number">9.1.</span> <span class="toc-text"> abc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dis"><span class="toc-number">9.2.</span> <span class="toc-text"> dis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inspect"><span class="toc-number">9.3.</span> <span class="toc-text"> inspect</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85"><span class="toc-number">10.</span> <span class="toc-text"> 模块和包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#importlib"><span class="toc-number">10.1.</span> <span class="toc-text"> importlib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pkgutil"><span class="toc-number">10.2.</span> <span class="toc-text"> pkgutil</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zipimport"><span class="toc-number">10.3.</span> <span class="toc-text"> zipimport</span></a></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-python3lib-3" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      python标准库-3
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2023/04/02/python3lib-3/" class="article-date">
	  <time datetime="2023-04-02T03:24:30.616Z" itemprop="datePublished">2023-04-02</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/python3-%E6%A0%87%E5%87%86%E5%BA%93/" rel="tag">python3 标准库</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2023/04/02/python3lib-3/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 5.6k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 29(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="网络通信"><a class="markdownIt-Anchor" href="#网络通信"></a> 网络通信</h2>
<h3 id="ipaddress"><a class="markdownIt-Anchor" href="#ipaddress"></a> ipaddress</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ipaddress</span><br><span class="line"><span class="comment"># ipaddress:解析ip地址</span></span><br></pre></td></tr></table></figure>
<h3 id="socket"><a class="markdownIt-Anchor" href="#socket"></a> socket</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="comment"># 网络通信</span></span><br><span class="line"><span class="comment"># 多线程网络服务</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;服务器端&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> socket, SOCK_STREAM, AF_INET</span><br><span class="line"><span class="keyword">from</span> base64 <span class="keyword">import</span> b64encode</span><br><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> dumps</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 自定义线程类</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">FileTransferHandler</span>(<span class="title class_ inherited__">Thread</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, cclient</span>):</span><br><span class="line">            <span class="built_in">super</span>().__init__()</span><br><span class="line">            self.cclient = cclient</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">            my_dict = &#123;&#125;</span><br><span class="line">            my_dict[<span class="string">&#x27;filename&#x27;</span>] = <span class="string">&#x27;guido.jpg&#x27;</span></span><br><span class="line">            <span class="comment"># JSON是纯文本不能携带二进制数据</span></span><br><span class="line">            <span class="comment"># 所以图片的二进制数据要处理成base64编码</span></span><br><span class="line">            my_dict[<span class="string">&#x27;filedata&#x27;</span>] = <span class="string">&#x27;data&#x27;</span></span><br><span class="line">            <span class="comment"># 通过dumps函数将字典处理成JSON字符串</span></span><br><span class="line">            json_str = dumps(my_dict)</span><br><span class="line">            <span class="comment"># 发送JSON字符串</span></span><br><span class="line">            self.cclient.send(json_str.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">            self.cclient.close()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1.创建套接字对象并指定使用哪种传输服务</span></span><br><span class="line">    server = socket()</span><br><span class="line">    <span class="comment"># 2.绑定IP地址和端口(区分不同的服务)</span></span><br><span class="line">    server.bind((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">5566</span>))</span><br><span class="line">    <span class="comment"># 3.开启监听 - 监听客户端连接到服务器</span></span><br><span class="line">    server.listen(<span class="number">512</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;服务器启动开始监听...&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        client, addr = server.accept()</span><br><span class="line">        <span class="comment"># 启动一个线程来处理客户端的请求</span></span><br><span class="line">        FileTransferHandler(client).start()</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;客户端&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> loads</span><br><span class="line"><span class="keyword">from</span> base64 <span class="keyword">import</span> b64decode</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    client = socket()</span><br><span class="line">    client.connect((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">5566</span>))</span><br><span class="line">    <span class="comment"># 定义一个保存二进制数据的对象</span></span><br><span class="line">    in_data = <span class="built_in">bytes</span>()</span><br><span class="line">    <span class="comment"># 由于不知道服务器发送的数据有多大每次接收1024字节</span></span><br><span class="line">    data = client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">while</span> data:</span><br><span class="line">        <span class="comment"># 将收到的数据拼接起来</span></span><br><span class="line">        in_data += data</span><br><span class="line">        data = client.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="comment"># 将收到的二进制数据解码成JSON字符串并转换成字典</span></span><br><span class="line">    <span class="comment"># loads函数的作用就是将JSON字符串转成字典对象</span></span><br><span class="line">    my_dict = loads(in_data.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="built_in">print</span>(my_dict)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;图片已保存.&#x27;</span>)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h3 id="selectors"><a class="markdownIt-Anchor" href="#selectors"></a> selectors</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> selectors</span><br><span class="line"></span><br><span class="line"><span class="comment"># io多路复用抽象</span></span><br></pre></td></tr></table></figure>
<h3 id="select"><a class="markdownIt-Anchor" href="#select"></a> select</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> select</span><br><span class="line"><span class="comment"># 高效等待IO</span></span><br></pre></td></tr></table></figure>
<h3 id="socketserver"><a class="markdownIt-Anchor" href="#socketserver"></a> socketserver</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="comment"># 创建网络服务器</span></span><br></pre></td></tr></table></figure>
<h2 id="互联网"><a class="markdownIt-Anchor" href="#互联网"></a> 互联网</h2>
<h3 id="urllibparase"><a class="markdownIt-Anchor" href="#urllibparase"></a> urllib.parase</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parase</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分解url</span></span><br></pre></td></tr></table></figure>
<h3 id="urllibrequest"><a class="markdownIt-Anchor" href="#urllibrequest"></a> urllib.request</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据url获取web资源</span></span><br><span class="line"><span class="comment"># get/post/参数/头文件/</span></span><br></pre></td></tr></table></figure>
<h3 id="urllibrobotparser"><a class="markdownIt-Anchor" href="#urllibrobotparser"></a> urllib.robotparser</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> robotparser</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获得网页的robots.txt文件,测试是否允许爬取页面</span></span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> robotparser</span><br><span class="line"></span><br><span class="line">AGENT_NAME = <span class="string">&#x27;Googlebot&#x27;</span></span><br><span class="line">URL_BASE = <span class="string">&#x27;https://zhuanlan.zhihu.com/&#x27;</span></span><br><span class="line">parser = robotparser.RobotFileParser()</span><br><span class="line">parser.set_url(parse.urljoin(URL_BASE, <span class="string">&#x27;robots.txt&#x27;</span>))</span><br><span class="line">parser.read()</span><br><span class="line"></span><br><span class="line">PATHS = [</span><br><span class="line">    <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/search-special&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/s&#x27;</span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> PATHS:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;!r:&gt;6&#125; : &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        parser.can_fetch(AGENT_NAME, path), path))</span><br><span class="line">    url = parse.urljoin(URL_BASE, path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;!r:&gt;6&#125; : &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        parser.can_fetch(AGENT_NAME, url), url))</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>  True : /
  True : https://zhuanlan.zhihu.com/

 False : /search-special
 False : https://zhuanlan.zhihu.com/search-special

 False : /login
 False : https://zhuanlan.zhihu.com/login

  True : /s
  True : https://zhuanlan.zhihu.com/s
</code></pre>
<h3 id="base64"><a class="markdownIt-Anchor" href="#base64"></a> base64</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="comment"># 将二进制数据转换为适合使用文本协议传输的ASCII的一个子集</span></span><br><span class="line">initial_data=<span class="string">&#x27;Copyright (c) 2008 Doug Hellmann All rights reserved.&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;initial_data:<span class="subst">&#123;initial_data&#125;</span>&#x27;</span>)</span><br><span class="line">byte_string = initial_data.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">encoded_data = base64.b64encode(byte_string)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;base64 data:<span class="subst">&#123;encoded_data&#125;</span>&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">encoded_data = <span class="string">b&#x27;VGhpcyBpcyB0aGUgZGF0YSwgaW4gdGhlIGNsZWFyLg==&#x27;</span></span><br><span class="line">decoded_data = base64.b64decode(encoded_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Encoded :&#x27;</span>, encoded_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Decoded :&#x27;</span>, decoded_data)</span><br></pre></td></tr></table></figure>
<pre><code>initial_data:Copyright (c) 2008 Doug Hellmann All rights reserved.
base64 data:b'Q29weXJpZ2h0IChjKSAyMDA4IERvdWcgSGVsbG1hbm4gQWxsIHJpZ2h0cyByZXNlcnZlZC4='
Encoded : b'VGhpcyBpcyB0aGUgZGF0YSwgaW4gdGhlIGNsZWFyLg=='
Decoded : b'This is the data, in the clear.'
</code></pre>
<h3 id="httpserver"><a class="markdownIt-Anchor" href="#httpserver"></a> http.server</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> http <span class="keyword">import</span> server</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自己实现do_GET(),do_POST()方法的web服务器</span></span><br></pre></td></tr></table></figure>
<h3 id="httpcookie"><a class="markdownIt-Anchor" href="#httpcookie"></a> http.cookie</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> http <span class="keyword">import</span> cookie</span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br></pre></td></tr></table></figure>
<h3 id="webbrowser"><a class="markdownIt-Anchor" href="#webbrowser"></a> webbrowser</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> webbrowser</span><br><span class="line"><span class="comment"># 浏览器打开界面</span></span><br><span class="line">webbrowser.open_new_tab(</span><br><span class="line">    <span class="string">&#x27;https://docs.python.org/3/library/webbrowser.html&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>True
</code></pre>
<h3 id="uuid"><a class="markdownIt-Anchor" href="#uuid"></a> uuid</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(uuid.getnode())</span><br><span class="line"><span class="built_in">print</span>(uuid.uuid1())</span><br></pre></td></tr></table></figure>
<pre><code>4943745048992
1e4a5d1c-cc80-11ed-8e72-047f0e2ae1a0
</code></pre>
<h3 id="json"><a class="markdownIt-Anchor" href="#json"></a> json</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment"># 键必须是字符串类型</span></span><br><span class="line"><span class="comment"># tuple会转成list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件</span></span><br><span class="line">json.load()</span><br><span class="line">json.dump()</span><br><span class="line"><span class="comment"># 字符串</span></span><br><span class="line">json.loads()</span><br><span class="line">json.dumps()</span><br></pre></td></tr></table></figure>
<h2 id="email"><a class="markdownIt-Anchor" href="#email"></a> email</h2>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP,SMTP_SSL</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="comment"># 创建一个带附件的邮件消息对象</span></span><br><span class="line">    message = MIMEMultipart()</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建文本内容</span></span><br><span class="line">    text_content = MIMEText(<span class="string">&#x27;附件中有本月数据请查收&#x27;</span>, <span class="string">&#x27;plain&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    message[<span class="string">&#x27;From&#x27;</span>] = Header(<span class="string">&#x27;gladdduck&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    message[<span class="string">&#x27;To&#x27;</span>] = Header(<span class="string">&#x27;亚哥&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    message[<span class="string">&#x27;Subject&#x27;</span>] = Header(<span class="string">&#x27;本月数据&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    <span class="comment"># 将文本内容添加到邮件消息对象中</span></span><br><span class="line">    message.attach(text_content)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 读取文件并将文件作为附件添加到邮件消息对象中</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;words.txt&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        txt = MIMEText(f.read(), <span class="string">&#x27;base64&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        txt[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line">        txt[<span class="string">&#x27;Content-Disposition&#x27;</span>] = <span class="string">&#x27;attachment; filename=hello.txt&#x27;</span></span><br><span class="line">        message.attach(txt)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 创建SMTP对象</span></span><br><span class="line">    smtper = SMTP_SSL(<span class="string">&#x27;smtp.qq.com&#x27;</span>)</span><br><span class="line">    <span class="comment"># 开启安全连接</span></span><br><span class="line">    <span class="comment"># smtper.starttls()</span></span><br><span class="line">    sender = <span class="string">&#x27;703214452@qq.com&#x27;</span></span><br><span class="line">    receivers = [<span class="string">&#x27;syxue@stu.suda.edu.cn&#x27;</span>]</span><br><span class="line">    <span class="comment"># 登录到SMTP服务器</span></span><br><span class="line">    <span class="comment"># 请注意此处不是使用密码而是邮件客户端授权码进行登录</span></span><br><span class="line">    <span class="comment"># 对此有疑问的读者可以联系自己使用的邮件服务器客服</span></span><br><span class="line">    smtper.login(sender, <span class="string">&#x27;*****&#x27;</span>)</span><br><span class="line">    <span class="comment"># 发送邮件</span></span><br><span class="line">    smtper.sendmail(sender, receivers, message.as_string())</span><br><span class="line">    <span class="comment"># 与邮件服务器断开连接</span></span><br><span class="line">    smtper.quit()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;发送完成!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="应用构建模块"><a class="markdownIt-Anchor" href="#应用构建模块"></a> 应用构建模块</h2>
<h3 id="argparse"><a class="markdownIt-Anchor" href="#argparse"></a> argparse</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="comment"># 声明</span></span><br><span class="line"><span class="comment"># parents参数,合并其他解析器</span></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 位置参数,必填</span></span><br><span class="line">parser.add_argument(<span class="string">&quot;echo&quot;</span>)</span><br><span class="line"><span class="comment"># 可选参数,一个简称,一个全称,不给默认为None</span></span><br><span class="line">parser.add_argument(<span class="string">&quot;-v&quot;</span>, <span class="string">&quot;--verbose&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">add_argument()参数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">action:默认是store,存储参数</span></span><br><span class="line"><span class="string">    store_const:表示只能赋值为const</span></span><br><span class="line"><span class="string">    append:把参数存储成列表</span></span><br><span class="line"><span class="string">    append_const:把const的值存储为列表</span></span><br><span class="line"><span class="string">    count:统计参数出现的次数</span></span><br><span class="line"><span class="string">    store_true/store_false:保存布尔值,出现就是true or false</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">default:默认值</span></span><br><span class="line"><span class="string">type:参数类型</span></span><br><span class="line"><span class="string">choice:只能从里面选</span></span><br><span class="line"><span class="string">required:可以省略 (仅针对可选参数)。</span></span><br><span class="line"><span class="string">help:打印的时候的帮助信息</span></span><br><span class="line"><span class="string">dest:解析后的参数名称</span></span><br><span class="line"><span class="string">nargs:表示后面要跟几个参数</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">group=parser.add_mutually_exclusive_group()互斥选项,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 解析,默认解析的sys.argv[1:]</span></span><br><span class="line">parser.parse_args()</span><br></pre></td></tr></table></figure>
<h3 id="getopt"><a class="markdownIt-Anchor" href="#getopt"></a> getopt</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getopt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令行选项解析</span></span><br></pre></td></tr></table></figure>
<h3 id="readline"><a class="markdownIt-Anchor" href="#readline"></a> readline</h3>
<h3 id="getpass"><a class="markdownIt-Anchor" href="#getpass"></a> getpass</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> getpass</span><br><span class="line"></span><br><span class="line">p=getpass.getpass(prompt=<span class="string">&#x27;输入密码&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(p,p)</span><br></pre></td></tr></table></figure>
<h3 id="cmd"><a class="markdownIt-Anchor" href="#cmd"></a> cmd</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cmd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 面向行的命令处理器</span></span><br></pre></td></tr></table></figure>
<h3 id="shlex"><a class="markdownIt-Anchor" href="#shlex"></a> shlex</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shlex</span><br><span class="line"><span class="comment"># 解析shell语法</span></span><br></pre></td></tr></table></figure>
<h3 id="configparser"><a class="markdownIt-Anchor" href="#configparser"></a> configparser</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">[DEFAULT]</span></span><br><span class="line"><span class="string">serveraliveinterval = 45</span></span><br><span class="line"><span class="string">compression = yes</span></span><br><span class="line"><span class="string">compressionlevel = 9</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[bitbucket]</span></span><br><span class="line"><span class="string">user = kk</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[topsecrect]</span></span><br><span class="line"><span class="string">port = 22</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line"></span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不存在忽略,可以多个配置文件合并</span></span><br><span class="line">config.read(<span class="string">&#x27;example.ini&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># sections就是[]中的配置,has_section()</span></span><br><span class="line"><span class="comment"># options是[]下面的选项,has_option()</span></span><br><span class="line"><span class="keyword">for</span> section_name <span class="keyword">in</span> config.sections():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Section:&#x27;</span>, section_name)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;  Options:&#x27;</span>, config.options(section_name))</span><br><span class="line">    <span class="keyword">for</span> name, value <span class="keyword">in</span> config.items(section_name):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;  &#123;&#125; = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(name, value))</span><br><span class="line">    <span class="built_in">print</span>()</span><br><span class="line">    </span><br><span class="line">config.add_section(<span class="string">&#x27;bug_tracker&#x27;</span>)</span><br><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;bug_tracker&#x27;</span>, <span class="string">&#x27;url&#x27;</span>, <span class="string">&#x27;http://localhost:8080/bugs&#x27;</span>)</span><br><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;bug_tracker&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;dhellmann&#x27;</span>)</span><br><span class="line">config.<span class="built_in">set</span>(<span class="string">&#x27;bug_tracker&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="string">&#x27;secret&#x27;</span>)</span><br><span class="line">config.remove_option(<span class="string">&#x27;bug_tracker&#x27;</span>, <span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">config.remove_section(<span class="string">&#x27;wiki&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># parser.write(f)</span></span><br></pre></td></tr></table></figure>
<h3 id="logging"><a class="markdownIt-Anchor" href="#logging"></a> logging</h3>
<p><img src="http://image.yayan.xyz/20230328215242.png" alt="" /></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logging.basicConfig(level=logging.WARNING)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不同模块的日志</span></span><br><span class="line"></span><br><span class="line">logger1 = logging.getLogger(<span class="string">&#x27;package1.module1&#x27;</span>)</span><br><span class="line">logger2 = logging.getLogger(<span class="string">&#x27;package2.module2&#x27;</span>)</span><br><span class="line"></span><br><span class="line">logger1.warning(<span class="string">&#x27;This message comes from one module&#x27;</span>)</span><br><span class="line">logger2.warning(<span class="string">&#x27;This comes from another module&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>WARNING:package1.module1:This message comes from one module
WARNING:package2.module2:This comes from another module
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment"># 格式化</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LOG_FILENAME = &#x27;logging_example.out&#x27;</span></span><br><span class="line">logging.basicConfig(<span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(pathname)s[line:%(lineno)d] - %(levelname)s: %(message)s&#x27;</span>,</span><br><span class="line">                    level=logging.DEBUG,</span><br><span class="line">                    <span class="comment"># filename=LOG_FILENAME,</span></span><br><span class="line">                    )</span><br><span class="line"></span><br><span class="line">logging.debug(<span class="string">&#x27;debug 信息&#x27;</span>)</span><br><span class="line">logging.info(<span class="string">&#x27;info 信息&#x27;</span>)</span><br><span class="line">logging.warning(<span class="string">&#x27;warning 信息&#x27;</span>)</span><br><span class="line">logging.error(<span class="string">&#x27;error 信息&#x27;</span>)</span><br><span class="line">logging.critical(<span class="string">&#x27;critial 信息&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">级别  数值</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">CRITICAL 50</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ERROR  40</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">WARNING  30</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">INFO  20</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">DEBUG  10</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">NOTSET  0</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>2023-03-28 21:44:07,434 - C:\Users\22627\AppData\Local\Temp\ipykernel_2380\2094327826.py[line:8] - DEBUG: debug 信息
2023-03-28 21:44:07,436 - C:\Users\22627\AppData\Local\Temp\ipykernel_2380\2094327826.py[line:9] - INFO: info 信息
2023-03-28 21:44:07,438 - C:\Users\22627\AppData\Local\Temp\ipykernel_2380\2094327826.py[line:10] - WARNING: warning 信息
2023-03-28 21:44:07,440 - C:\Users\22627\AppData\Local\Temp\ipykernel_2380\2094327826.py[line:11] - ERROR: error 信息
2023-03-28 21:44:07,443 - C:\Users\22627\AppData\Local\Temp\ipykernel_2380\2094327826.py[line:12] - CRITICAL: critial 信息
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写不同文件</span></span><br><span class="line"><span class="keyword">import</span> glob</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">import</span> logging.handlers</span><br><span class="line"></span><br><span class="line">LOG_FILENAME = <span class="string">&#x27;logging_rotatingfile_example.out&#x27;</span></span><br><span class="line"></span><br><span class="line">my_logger = logging.getLogger(<span class="string">&#x27;MyLogger&#x27;</span>)</span><br><span class="line">my_logger.setLevel(logging.DEBUG)</span><br><span class="line"></span><br><span class="line">handler = logging.handlers.RotatingFileHandler(</span><br><span class="line">    LOG_FILENAME,</span><br><span class="line">    maxBytes=<span class="number">20</span>,</span><br><span class="line">    backupCount=<span class="number">5</span>,</span><br><span class="line">)</span><br><span class="line">my_logger.addHandler(handler)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">    my_logger.debug(<span class="string">&#x27;i = %d&#x27;</span> % i)</span><br><span class="line"></span><br><span class="line">logfiles = glob.glob(<span class="string">&#x27;%s*&#x27;</span> % LOG_FILENAME)</span><br><span class="line"><span class="keyword">for</span> filename <span class="keyword">in</span> <span class="built_in">sorted</span>(logfiles):</span><br><span class="line">    <span class="built_in">print</span>(filename)</span><br></pre></td></tr></table></figure>
<h3 id="fileinput"><a class="markdownIt-Anchor" href="#fileinput"></a> fileinput</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fileinput</span><br><span class="line"></span><br><span class="line"><span class="comment"># 命令行过滤器框架</span></span><br></pre></td></tr></table></figure>
<h3 id="atexit"><a class="markdownIt-Anchor" href="#atexit"></a> atexit</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> atexit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 程序关闭回调</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_cleanup</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;my_cleanup(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line">atexit.register(my_cleanup, <span class="string">&#x27;first&#x27;</span>)</span><br><span class="line">atexit.register(my_cleanup, <span class="string">&#x27;second&#x27;</span>)</span><br><span class="line">atexit.register(my_cleanup, <span class="string">&#x27;third&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 因为信号终止</span></span><br><span class="line"><span class="comment"># os._exit()</span></span><br><span class="line"><span class="comment"># 致命错误</span></span><br><span class="line"><span class="meta">@atexit.register</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">all_done</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;all_done()&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;starting main program&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>starting main program
</code></pre>
<h3 id="sched"><a class="markdownIt-Anchor" href="#sched"></a> sched</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sched</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在指定时刻运行任务</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sched</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">scheduler = sched.scheduler(time.time, time.sleep)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">long_event</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;BEGIN EVENT :&#x27;</span>, time.ctime(time.time()), name)</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;FINISH EVENT:&#x27;</span>, time.ctime(time.time()), name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;START:&#x27;</span>, time.ctime(time.time()))</span><br><span class="line"><span class="comment"># 时间,优先级,函数,参数</span></span><br><span class="line">scheduler.enter(<span class="number">2</span>, <span class="number">1</span>, long_event, (<span class="string">&#x27;first&#x27;</span>,))</span><br><span class="line"><span class="comment"># run是阻塞的,但是这个是到了就执行,要在不同线程内取消</span></span><br><span class="line">scheduler.enter(<span class="number">3</span>, <span class="number">1</span>, long_event, (<span class="string">&#x27;second&#x27;</span>,))</span><br><span class="line"></span><br><span class="line">scheduler.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>START: Tue Mar 28 21:57:03 2023
BEGIN EVENT : Tue Mar 28 21:57:05 2023 first
FINISH EVENT: Tue Mar 28 21:57:07 2023 first
BEGIN EVENT : Tue Mar 28 21:57:07 2023 second
FINISH EVENT: Tue Mar 28 21:57:09 2023 second
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">price=<span class="number">0</span></span><br><span class="line">age=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="keyword">if</span> age&lt;<span class="number">12</span>:</span><br><span class="line">    price=<span class="number">0</span></span><br><span class="line"><span class="keyword">elif</span> age&lt;=<span class="number">65</span>:</span><br><span class="line">    price=<span class="number">40</span></span><br><span class="line"><span class="keyword">elif</span> age&gt;<span class="number">65</span>:</span><br><span class="line">    price=<span class="number">20</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;Your price is <span class="subst">&#123;price&#125;</span> yuan&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>Your price is 40 yuan
</code></pre>
<h2 id="国际化和本地化"><a class="markdownIt-Anchor" href="#国际化和本地化"></a> 国际化和本地化</h2>
<h2 id="开发工具"><a class="markdownIt-Anchor" href="#开发工具"></a> 开发工具</h2>
<h3 id="pydoc"><a class="markdownIt-Anchor" href="#pydoc"></a> pydoc</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pydoc</span><br><span class="line"><span class="keyword">import</span> atexit</span><br><span class="line"><span class="comment"># 运行时生成帮助文本</span></span><br><span class="line">pydoc.doc(atexit)</span><br></pre></td></tr></table></figure>
<h3 id="doctest"><a class="markdownIt-Anchor" href="#doctest"></a> doctest</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> doctest</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行嵌入文档中的例子，验证是否生成期望的结果</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_function</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns a * b.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Works with numbers:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; my_function(2, 3)</span></span><br><span class="line"><span class="string">    6</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    and strings:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; my_function(&#x27;a&#x27;, 3)</span></span><br><span class="line"><span class="string">    &#x27;aaa&#x27;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    # 忽略可能会变化的部分</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; unpredictable(MyClass()) #doctest: +ELLIPSIS</span></span><br><span class="line"><span class="string">    [&lt;doctest_ellipsis.MyClass object at 0x...&gt;]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    doctest.testmod()</span><br><span class="line"><span class="comment"># !python3 -m doctest -v xxx.py</span></span><br></pre></td></tr></table></figure>
<h3 id="unittest"><a class="markdownIt-Anchor" href="#unittest"></a> unittest</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="comment"># 自动测试框架</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimplisticTest</span>(unittest.TestCase):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">self</span>):</span><br><span class="line">        a = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">        b = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">        self.assertEqual(a, b)</span><br><span class="line">        self.assertFalse()</span><br><span class="line">        self.assertTrue()</span><br><span class="line">        self.assertNotEqual()</span><br><span class="line">        self.assertNotEqual()</span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<h3 id="trace"><a class="markdownIt-Anchor" href="#trace"></a> trace</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> trace</span><br><span class="line"></span><br><span class="line"><span class="comment"># 监视所执行的语句，生成报告，查看互相调用的函数之间的关系</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 会生成函数之间的调用关系</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">recurse</span>(<span class="params">level</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;recurse(&#123;&#125;)&#x27;</span>.<span class="built_in">format</span>(level))</span><br><span class="line">    <span class="keyword">if</span> level:</span><br><span class="line">        recurse(level - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">not_called</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;This function is never called.&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;This is the main program.&#x27;</span>)</span><br><span class="line">    recurse(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">tracer = trace.Trace(count=<span class="literal">False</span>, trace=<span class="literal">True</span>)</span><br><span class="line">tracer.run(<span class="string">&#x27;recurse(2)&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="traceback"><a class="markdownIt-Anchor" href="#traceback"></a> traceback</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用栈来生成错误消息</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="cgitb"><a class="markdownIt-Anchor" href="#cgitb"></a> cgitb</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cgitb</span><br><span class="line"></span><br><span class="line"><span class="comment"># cgitb把sys.excepthook 换成一个函数,格式化输出，更详细</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="pdb"><a class="markdownIt-Anchor" href="#pdb"></a> pdb</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pdb</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂停程序，逐步监视执行</span></span><br><span class="line"><span class="comment"># debug</span></span><br></pre></td></tr></table></figure>
<h3 id="profile-pstats"><a class="markdownIt-Anchor" href="#profile-pstats"></a> profile &amp; pstats</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> profile</span><br><span class="line"><span class="keyword">import</span> pstats</span><br><span class="line"><span class="comment"># profile收集消耗处理器资源的统计信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib_seq</span>(<span class="params">n</span>):</span><br><span class="line">    seq = []</span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        seq.extend(fib_seq(n - <span class="number">1</span>))</span><br><span class="line">    seq.append(fib(n))</span><br><span class="line">    <span class="keyword">return</span> seq</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># profile.run(&#x27;print(fib_seq(20)); print()&#x27;)</span></span><br><span class="line">profile.runctx(</span><br><span class="line">    <span class="string">&#x27;print(fib_seq(n)); print()&#x27;</span>,</span><br><span class="line">    <span class="built_in">globals</span>(),</span><br><span class="line">    &#123;<span class="string">&#x27;n&#x27;</span>: <span class="number">20</span>&#125;,</span><br><span class="line">)</span><br><span class="line"><span class="comment"># pstats与profile结合</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765]

         57409 function calls (119 primitive calls) in 0.156 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     21/1    0.000    0.000    0.156    0.156 1066040024.py:12(fib_seq)
 57291/21    0.156    0.000    0.156    0.007 1066040024.py:4(fib)
        4    0.000    0.000    0.000    0.000 :0(acquire)
       25    0.000    0.000    0.000    0.000 :0(append)
        1    0.000    0.000    0.156    0.156 :0(exec)
       20    0.000    0.000    0.000    0.000 :0(extend)
        3    0.000    0.000    0.000    0.000 :0(getpid)
        3    0.000    0.000    0.000    0.000 :0(isinstance)
        3    0.000    0.000    0.000    0.000 :0(len)
        2    0.000    0.000    0.000    0.000 :0(print)
        1    0.000    0.000    0.000    0.000 :0(setprofile)
        1    0.000    0.000    0.156    0.156 &lt;string&gt;:1(&lt;module&gt;)
        4    0.000    0.000    0.000    0.000 iostream.py:206(schedule)
        3    0.000    0.000    0.000    0.000 iostream.py:418(_is_master_process)
        3    0.000    0.000    0.000    0.000 iostream.py:437(_schedule_flush)
        3    0.000    0.000    0.000    0.000 iostream.py:500(write)
        4    0.000    0.000    0.000    0.000 iostream.py:96(_event_pipe)
        1    0.000    0.000    0.156    0.156 profile:0(print(fib_seq(n)); print())
        0    0.000             0.000          profile:0(profiler)
        4    0.000    0.000    0.000    0.000 socket.py:543(send)
        4    0.000    0.000    0.000    0.000 threading.py:1066(_wait_for_tstate_lock)
        4    0.000    0.000    0.000    0.000 threading.py:1133(is_alive)
        4    0.000    0.000    0.000    0.000 threading.py:536(is_set)
</code></pre>
<h3 id="timeit"><a class="markdownIt-Anchor" href="#timeit"></a> timeit</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"><span class="comment"># 测量小代码时间</span></span><br><span class="line">t = timeit.Timer(<span class="string">&quot;print(&#x27;main statement&#x27;)&quot;</span>, <span class="string">&quot;print(&#x27;setup&#x27;)&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;TIMEIT:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(t.timeit(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;REPEAT:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(t.repeat(<span class="number">3</span>, <span class="number">2</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>TIMEIT:
setup
main statement
main statement
1.2299999980314169e-05
REPEAT:
setup
main statement
main statement
setup
main statement
main statement
setup
main statement
main statement
[0.00017259999958696426, 2.790000007735216e-05, 1.540000039312872e-05]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># Yolov5时间记录</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Profile</span>(contextlib.ContextDecorator):</span><br><span class="line">    <span class="comment"># YOLOv5 Profile class. Usage: @Profile() decorator or &#x27;with Profile():&#x27; context manager</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, t=<span class="number">0.0</span></span>):</span><br><span class="line">        self.t = t</span><br><span class="line">        <span class="comment"># self.cuda = torch.cuda.is_available()</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        self.start = self.time()</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, <span class="built_in">type</span>, value, traceback</span>):</span><br><span class="line">        self.dt = self.time() - self.start  <span class="comment"># delta-time</span></span><br><span class="line">        self.t += self.dt  <span class="comment"># accumulate dt</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">time</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># if self.cuda:</span></span><br><span class="line">        <span class="comment">#     torch.cuda.synchronize()</span></span><br><span class="line">        <span class="keyword">return</span> time.time()</span><br><span class="line">    </span><br><span class="line">ttt=Profile()</span><br><span class="line"><span class="keyword">with</span> ttt:</span><br><span class="line">    [_ <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">int</span>(<span class="number">1e7</span>))]</span><br><span class="line"><span class="built_in">print</span>(ttt.t)</span><br></pre></td></tr></table></figure>
<pre><code>0.534808874130249
</code></pre>
<h3 id="tabnanny"><a class="markdownIt-Anchor" href="#tabnanny"></a> tabnanny</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tabnanny</span><br><span class="line"><span class="comment"># 缩进验证工具</span></span><br></pre></td></tr></table></figure>
<h3 id="compileall"><a class="markdownIt-Anchor" href="#compileall"></a> compileall</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> compileall</span><br></pre></td></tr></table></figure>
<h3 id="venv"><a class="markdownIt-Anchor" href="#venv"></a> venv</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> venv</span><br><span class="line"><span class="comment"># 创建虚拟环境</span></span><br></pre></td></tr></table></figure>
<h2 id="运行时特性"><a class="markdownIt-Anchor" href="#运行时特性"></a> 运行时特性</h2>
<h3 id="site"><a class="markdownIt-Anchor" href="#site"></a> site</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> site</span><br><span class="line"></span><br><span class="line"><span class="comment"># 站点特定的配置,导入路径</span></span><br></pre></td></tr></table></figure>
<h3 id="sys"><a class="markdownIt-Anchor" href="#sys"></a> sys</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># 系统特定配置</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Version info:&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;sys.version      =&#x27;</span>, <span class="built_in">repr</span>(sys.version))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;sys.version_info =&#x27;</span>, sys.version_info)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;sys.hexversion   =&#x27;</span>, <span class="built_in">hex</span>(sys.hexversion))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;sys.api_version  =&#x27;</span>, sys.api_version)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;This interpreter was built for:&#x27;</span>, sys.platform)</span><br><span class="line"><span class="comment"># 获取运行时参数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Arguments:&#x27;</span>, sys.argv)</span><br><span class="line"><span class="comment"># 退出</span></span><br><span class="line"><span class="comment"># sys.exit(1)</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Name:&#x27;</span>, sys.implementation.name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Version:&#x27;</span>, sys.implementation.version)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Cache tag:&#x27;</span>, sys.implementation.cache_tag)</span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&#x27;STATUS: Reading from stdin&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># data = sys.stdin.read()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&#x27;STATUS: Writing data to stdout&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sys.stdout.write(data)</span></span><br><span class="line"><span class="comment"># sys.stdout.flush()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&#x27;STATUS: Done&#x27;)</span></span><br><span class="line"><span class="comment"># 参数的引用计数</span></span><br><span class="line">one = []</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;At start         :&#x27;</span>, sys.getrefcount(one))</span><br><span class="line">two = one</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Second reference :&#x27;</span>, sys.getrefcount(one))</span><br><span class="line"><span class="keyword">del</span> two</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After del        :&#x27;</span>, sys.getrefcount(one))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 参数大小</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">objects = [</span><br><span class="line">    [], (), &#123;&#125;, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;string&#x27;</span>, <span class="string">b&#x27;bytes&#x27;</span>, <span class="number">1</span>, <span class="number">2.3</span>,</span><br><span class="line">    MyClass, MyClass(),</span><br><span class="line">]</span><br><span class="line"><span class="comment"># 不统计类的属性大小</span></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> objects:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:&gt;10&#125; : &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">type</span>(obj).__name__,sys.getsizeof(obj)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>Version info:

sys.version      = '3.9.13 (main, Aug 25 2022, 23:51:50) [MSC v.1916 64 bit (AMD64)]'
sys.version_info = sys.version_info(major=3, minor=9, micro=13, releaselevel='final', serial=0)
sys.hexversion   = 0x3090df0
sys.api_version  = 1013
This interpreter was built for: win32
Arguments: ['C:\\Users\\Ada\\AppData\\Roaming\\Python\\Python39\\site-packages\\ipykernel_launcher.py', '--ip=127.0.0.1', '--stdin=9008', '--control=9006', '--hb=9005', '--Session.signature_scheme=&quot;hmac-sha256&quot;', '--Session.key=b&quot;fb322aac-cfd4-4a49-87ab-e11c0e6aea3e&quot;', '--shell=9007', '--transport=&quot;tcp&quot;', '--iopub=9009', '--f=c:\\Users\\Ada\\AppData\\Roaming\\jupyter\\runtime\\kernel-v2-100766YwHlokYHZ1d.json']
Name: cpython
Version: sys.version_info(major=3, minor=9, micro=13, releaselevel='final', serial=0)
Cache tag: cpython-39
At start         : 2
Second reference : 3
After del        : 2
      list : 56
     tuple : 40
      dict : 64
       str : 50
       str : 55
     bytes : 38
       int : 28
     float : 24
      type : 1064
   MyClass : 48
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">WithAttributes</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.a = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">        self.b = <span class="string">&#x27;b&#x27;</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__sizeof__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">object</span>.__sizeof__(self) + \</span><br><span class="line">            <span class="built_in">sum</span>(sys.getsizeof(v) <span class="keyword">for</span> v <span class="keyword">in</span> self.__dict__.values())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计带参数的类大小</span></span><br><span class="line">my_inst = WithAttributes()</span><br><span class="line"><span class="built_in">print</span>(sys.getsizeof(my_inst))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># getrecursionlimit()  setrecursionlimit() 查看设置最大递归深度</span></span><br><span class="line"><span class="comment"># getswitchinterval()  setswitchinterval() 查看设置线程获取的cpu运行时间</span></span><br><span class="line"><span class="comment"># 列表字典串的最大大小</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;maxsize   :&#x27;</span>, sys.maxsize)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;maxunicode:&#x27;</span>, sys.maxunicode)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数的信息</span></span><br><span class="line"><span class="comment"># sys.float_info</span></span><br><span class="line"><span class="comment"># sys.int_info</span></span><br></pre></td></tr></table></figure>
<pre><code>148
maxsize   : 9223372036854775807
maxunicode: 1114111
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 处理错误信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_excepthook</span>(<span class="params"><span class="built_in">type</span>, value, traceback</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Unhandled error:&#x27;</span>, <span class="built_in">type</span>, value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sys.excepthook = my_excepthook</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Before exception&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">raise</span> RuntimeError(<span class="string">&#x27;This is the error message&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After exception&#x27;</span>)</span><br><span class="line"><span class="comment"># Before exception</span></span><br><span class="line"><span class="comment"># Unhandled error: &lt;class &#x27;RuntimeError&#x27;&gt; This is the error </span></span><br><span class="line"><span class="comment"># message</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_something_with_exception</span>():</span><br><span class="line">    exc_type, exc_value = sys.exc_info()[:<span class="number">2</span>]</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Handling &#123;&#125; exception with message &quot;&#123;&#125;&quot; in &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        exc_type.__name__, exc_value,</span><br><span class="line">        threading.current_thread().name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cause_exception</span>(<span class="params">delay</span>):</span><br><span class="line">    time.sleep(delay)</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(<span class="string">&#x27;This is the error message&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">thread_target</span>(<span class="params">delay</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cause_exception(delay)</span><br><span class="line">    <span class="keyword">except</span> RuntimeError:</span><br><span class="line">        do_something_with_exception()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">threads = [</span><br><span class="line">    threading.Thread(target=thread_target, args=(<span class="number">0.3</span>,)),</span><br><span class="line">    threading.Thread(target=thread_target, args=(<span class="number">0.1</span>,)),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.start()</span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.join()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>Handling RuntimeError exception with message &quot;This is the error message&quot; in Thread-7
Handling RuntimeError exception with message &quot;This is the error message&quot; in Thread-6
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">names = <span class="built_in">sorted</span>(sys.modules.keys())</span><br><span class="line">name_text = <span class="string">&#x27;, &#x27;</span>.join(names)</span><br><span class="line"><span class="comment"># print(name_text)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> d <span class="keyword">in</span> sys.path:</span><br><span class="line">    <span class="built_in">print</span>(d)</span><br><span class="line"></span><br><span class="line"><span class="comment"># sys.path 加入路径,</span></span><br></pre></td></tr></table></figure>
<pre><code>d:\BaiduSyncdisk\Blog\source\_posts
e:\Anaconda3\envs\AAA\python39.zip
e:\Anaconda3\envs\AAA\DLLs
e:\Anaconda3\envs\AAA\lib
e:\Anaconda3\envs\AAA

C:\Users\Ada\AppData\Roaming\Python\Python39\site-packages
e:\Anaconda3\envs\AAA\lib\site-packages
e:\Anaconda3\envs\AAA\lib\site-packages\openea-1.0-py3.9.egg
e:\Anaconda3\envs\AAA\lib\site-packages\python_levenshtein-0.20.7-py3.9.egg
e:\Anaconda3\envs\AAA\lib\site-packages\gensim-4.2.0-py3.9-win-amd64.egg
e:\Anaconda3\envs\AAA\lib\site-packages\matching-0.1.1-py3.9.egg
e:\Anaconda3\envs\AAA\lib\site-packages\win32
e:\Anaconda3\envs\AAA\lib\site-packages\win32\lib
e:\Anaconda3\envs\AAA\lib\site-packages\Pythonwin
C:\Users\Ada\AppData\Roaming\Python\Python39\site-packages\IPython\extensions
C:\Users\Ada\.ipython
</code></pre>
<h3 id="os"><a class="markdownIt-Anchor" href="#os"></a> os</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line">sys.path.append(<span class="string">r&#x27;D:\BaiduSyncdisk\Blog\source&#x27;</span>)</span><br><span class="line"><span class="comment"># os.listdir()</span></span><br><span class="line">root=<span class="string">&#x27;D:\BaiduSyncdisk\Blog\source&#x27;</span></span><br><span class="line"><span class="keyword">for</span> dir_name, sub_dirs, files <span class="keyword">in</span> os.walk(root):</span><br><span class="line">    <span class="built_in">print</span>(dir_name,sub_dirs,files)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> entry <span class="keyword">in</span> os.scandir(root):</span><br><span class="line">    <span class="keyword">if</span> entry.is_dir():</span><br><span class="line">        typ = <span class="string">&#x27;dir&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> entry.is_file():</span><br><span class="line">        typ = <span class="string">&#x27;file&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> entry.is_symlink():</span><br><span class="line">        typ = <span class="string">&#x27;link&#x27;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        typ = <span class="string">&#x27;unknown&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;name&#125; &#123;typ&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        name=entry.name,</span><br><span class="line">        typ=typ,</span><br><span class="line">    ))</span><br><span class="line"><span class="comment"># stat()查看详细信息</span></span><br><span class="line"><span class="comment"># chmod()修改权限</span></span><br><span class="line"><span class="comment"># access()测试进程权限</span></span><br><span class="line"><span class="comment"># mkdir() 前面的路径必须存在</span></span><br><span class="line"><span class="comment"># makedirs() 创建不存在的父路径</span></span><br><span class="line"><span class="comment"># rmdir() 只会删除子目录</span></span><br><span class="line"><span class="comment"># removedirs() 删除为空的所有父目录</span></span><br><span class="line"><span class="comment"># replace() </span></span><br><span class="line"><span class="comment"># rename()重命名</span></span><br><span class="line"><span class="comment"># environ() 环境变量</span></span><br><span class="line"><span class="comment"># getenv()</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当前工作目录</span></span><br><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"><span class="comment"># 更改工作目录</span></span><br><span class="line">os.chdir(<span class="string">&#x27;d:\\BaiduSyncdisk\\Blog\\source&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"><span class="comment"># 运行外部命令</span></span><br><span class="line"><span class="built_in">print</span>(os.system(<span class="string">&#x27;pwd&#x27;</span>))</span><br><span class="line"><span class="comment"># 创建进程</span></span><br><span class="line"><span class="comment"># os.fork()</span></span><br></pre></td></tr></table></figure>
<pre><code>d:\BaiduSyncdisk\Blog\source
d:\BaiduSyncdisk\Blog\source
1
</code></pre>
<h3 id="platform"><a class="markdownIt-Anchor" href="#platform"></a> platform</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;uname:&#x27;</span>, platform.uname())</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;system   :&#x27;</span>, platform.system())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;node     :&#x27;</span>, platform.node())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;release  :&#x27;</span>, platform.release())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;version  :&#x27;</span>, platform.version())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;machine  :&#x27;</span>, platform.machine())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;processor:&#x27;</span>, platform.processor())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;interpreter:&#x27;</span>, platform.architecture())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;/bin/ls    :&#x27;</span>, platform.architecture(<span class="string">&#x27;/bin/ls&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Normal :&#x27;</span>, platform.platform())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Aliased:&#x27;</span>, platform.platform(aliased=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Terse  :&#x27;</span>, platform.platform(terse=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Version      :&#x27;</span>, platform.python_version())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Version tuple:&#x27;</span>, platform.python_version_tuple())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Compiler     :&#x27;</span>, platform.python_compiler())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Build        :&#x27;</span>, platform.python_build())</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>uname: uname_result(system='Windows', node='DESKTOP-SFFEKV7', release='10', version='10.0.19041', machine='AMD64')

system   : Windows
node     : DESKTOP-SFFEKV7
release  : 10
version  : 10.0.19041
machine  : AMD64
processor: Intel64 Family 6 Model 158 Stepping 10, GenuineIntel
interpreter: ('64bit', 'WindowsPE')
/bin/ls    : ('64bit', '')
Normal : Windows-10-10.0.19041-SP0
Aliased: Windows-10-10.0.19041-SP0
Terse  : Windows-10
Version      : 3.9.13
Version tuple: ('3', '9', '13')
Compiler     : MSC v.1916 64 bit (AMD64)
Build        : ('main', 'Aug 25 2022 23:51:50')
</code></pre>
<h3 id="resource"><a class="markdownIt-Anchor" href="#resource"></a> resource</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> resource</span><br><span class="line"><span class="comment"># 系统资源管理</span></span><br><span class="line">RESOURCES = [</span><br><span class="line">    (<span class="string">&#x27;ru_utime&#x27;</span>, <span class="string">&#x27;User time&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_stime&#x27;</span>, <span class="string">&#x27;System time&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_maxrss&#x27;</span>, <span class="string">&#x27;Max. Resident Set Size&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_ixrss&#x27;</span>, <span class="string">&#x27;Shared Memory Size&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_idrss&#x27;</span>, <span class="string">&#x27;Unshared Memory Size&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_isrss&#x27;</span>, <span class="string">&#x27;Stack Size&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_inblock&#x27;</span>, <span class="string">&#x27;Block inputs&#x27;</span>),</span><br><span class="line">    (<span class="string">&#x27;ru_oublock&#x27;</span>, <span class="string">&#x27;Block outputs&#x27;</span>),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">usage = resource.getrusage(resource.RUSAGE_SELF)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, desc <span class="keyword">in</span> RESOURCES:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;:&lt;25&#125; (&#123;:&lt;10&#125;) = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        desc, name, <span class="built_in">getattr</span>(usage, name)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="gc"><a class="markdownIt-Anchor" href="#gc"></a> gc</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> gc</span><br><span class="line"><span class="comment"># 垃圾回收</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">enable()             --启用自动垃圾回收。</span></span><br><span class="line"><span class="string">disable()            --禁用自动垃圾回收。</span></span><br><span class="line"><span class="string">isenabled()          --如果启用了自动收集，则返回true。</span></span><br><span class="line"><span class="string">collect()            --立即执行完全收集。</span></span><br><span class="line"><span class="string">get_count()          --返回当前集合计数。</span></span><br><span class="line"><span class="string">get_stats()          --返回包含每代统计信息的词典列表。</span></span><br><span class="line"><span class="string">set_debug()          --设置调试标志。</span></span><br><span class="line"><span class="string">get_debug()          --获取调试标志。</span></span><br><span class="line"><span class="string">set_threshold()      --设置收集阈值。</span></span><br><span class="line"><span class="string">get_threshold()      --返回集合阈值的当前值。</span></span><br><span class="line"><span class="string">get_objects()        --返回收集器跟踪的所有对象的列表。</span></span><br><span class="line"><span class="string">is_tracked()         --如果跟踪给定对象，则返回true。</span></span><br><span class="line"><span class="string">is_finalized()       --如果给定对象已定稿，则返回true。</span></span><br><span class="line"><span class="string">get_referrers()      --返回引用对象的对象列表。</span></span><br><span class="line"><span class="string">get_referents()      --返回对象引用的对象列表。</span></span><br><span class="line"><span class="string">freeze()             --冻结所有跟踪对象，并在将来的收集中忽略它们。</span></span><br><span class="line"><span class="string">unfreeze()           --解冻永久生成中的所有对象。</span></span><br><span class="line"><span class="string">get_freeze_count()   --返回永久生成中的对象数。</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>():</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">t = Test()</span><br><span class="line">k = Test()</span><br><span class="line">t._self = t</span><br><span class="line"><span class="comment"># 会多一个 因为gc会用一个</span></span><br><span class="line"><span class="built_in">print</span>(sys.getrefcount(t))    <span class="comment">#sys.getrefcount函数用来查看一个对象有几个引用</span></span><br><span class="line"><span class="built_in">print</span>(sys.getrefcount(k))</span><br><span class="line"><span class="comment"># del语句可以消除一个引用关系</span></span><br><span class="line"><span class="comment"># 引用计数为主，标记-清除+分代回收为辅的回收策略</span></span><br><span class="line"><span class="comment"># 专门用来处理这些循环引用</span></span><br><span class="line"><span class="comment"># gc.collect()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#  gc.get_threshold()</span></span><br><span class="line"><span class="comment"># python中默认把所有对象分成三代。</span></span><br><span class="line"><span class="comment"># 第0代包含了最新的对象，第2代则是最早的一些对象。</span></span><br><span class="line"><span class="comment"># 在一次垃圾回收中，所有未被回收的对象会被移到高一代的地方。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这个方法返回的是(700,10,10)，这也是gc的默认值。</span></span><br><span class="line"><span class="comment"># 这个值的意思是说，在第0代对象数量达到700个之前，不把未被回收的对象放入第一代；</span></span><br><span class="line"><span class="comment"># 而在第一代对象数量达到10个之前也不把未被回收的对象移到第二代。</span></span><br><span class="line"><span class="comment"># 可以是使用gc.set_threshold(threashold0,threshold1,threshold2)来手动设置这组阈值。</span></span><br></pre></td></tr></table></figure>
<h3 id="sysconfig"><a class="markdownIt-Anchor" href="#sysconfig"></a> sysconfig</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sysconfig</span><br><span class="line"><span class="comment"># 解释器编译时配置</span></span><br></pre></td></tr></table></figure>
<h2 id="语言工具"><a class="markdownIt-Anchor" href="#语言工具"></a> 语言工具</h2>
<h2 id="warnings"><a class="markdownIt-Anchor" href="#warnings"></a> warnings</h2>
<p><img src="https://image.yayan.xyz/20230330103900.png" alt="" /></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 报告非致命条件或可修复错误</span></span><br><span class="line"><span class="comment"># error把警告变成错误,simplefilter是filterwarnings简化版</span></span><br><span class="line">warnings.simplefilter(<span class="string">&#x27;ignore&#x27;</span>, UserWarning)</span><br><span class="line"><span class="comment"># 发出一个warnings</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Before the warning&#x27;</span>)</span><br><span class="line">warnings.warn(<span class="string">&#x27;This is a warning message&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;After the warning&#x27;</span>)</span><br><span class="line"><span class="comment"># filterwarnings() 根据规则过滤信息</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>, <span class="string">&#x27;.*do not.*&#x27;</span>,)</span><br><span class="line"></span><br><span class="line">warnings.warn(<span class="string">&#x27;Show this message&#x27;</span>)</span><br><span class="line">warnings.warn(<span class="string">&#x27;Do not show this message&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>Before the warning
After the warning
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.simplefilter(<span class="string">&#x27;once&#x27;</span>, UserWarning)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">warning_on_one_line</span>(<span class="params">message, category, filename, lineno,</span></span><br><span class="line"><span class="params">                        file=<span class="literal">None</span>, line=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;-&gt; &#123;&#125;:&#123;&#125;: &#123;&#125;:&#123;&#125;\n&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        filename, lineno, category.__name__, message)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">warnings.warn(<span class="string">&#x27;Warning message, before&#x27;</span>)</span><br><span class="line">warnings.formatwarning = warning_on_one_line</span><br><span class="line">warnings.warn(<span class="string">&#x27;Warning message, after&#x27;</span>)</span><br><span class="line"></span><br><span class="line">warnings.warn(<span class="string">&#x27;This is a warning!&#x27;</span>)</span><br><span class="line">warnings.warn(<span class="string">&#x27;This is a warning!&#x27;</span>)</span><br><span class="line">warnings.warn(<span class="string">&#x27;This is a warning!&#x27;</span>)</span><br></pre></td></tr></table></figure>
<pre><code>C:\Users\Ada\AppData\Local\Temp/ipykernel_9460/3571311107.py:9: UserWarning: Warning message, before
  warnings.warn('Warning message, before')
-&gt; C:\Users\Ada\AppData\Local\Temp/ipykernel_9460/3571311107.py:11: UserWarning:Warning message, after
-&gt; C:\Users\Ada\AppData\Local\Temp/ipykernel_9460/3571311107.py:13: UserWarning:This is a warning!
</code></pre>
<h3 id="abc"><a class="markdownIt-Anchor" href="#abc"></a> abc</h3>
<h3 id="dis"><a class="markdownIt-Anchor" href="#dis"></a> dis</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dis</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字节码反汇编工具</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">*args</span>):</span><br><span class="line">    nargs = <span class="built_in">len</span>(args)</span><br><span class="line">    <span class="built_in">print</span>(nargs, args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">import</span> dis</span><br><span class="line">    dis.dis(f)</span><br><span class="line">    dis.show_code(f)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>  6           0 LOAD_GLOBAL              0 (len)
              2 LOAD_FAST                0 (args)
              4 CALL_FUNCTION            1
              6 STORE_FAST               1 (nargs)

  7           8 LOAD_GLOBAL              1 (print)
             10 LOAD_FAST                1 (nargs)
             12 LOAD_FAST                0 (args)
             14 CALL_FUNCTION            2
             16 POP_TOP
             18 LOAD_CONST               0 (None)
             20 RETURN_VALUE
Name:              f
Filename:          C:\Users\Ada\AppData\Local\Temp/ipykernel_9460/3862671634.py
Argument count:    0
Positional-only arguments: 0
Kw-only arguments: 0
Number of locals:  2
Stack size:        3
Flags:             OPTIMIZED, NEWLOCALS, VARARGS, NOFREE
Constants:
   0: None
Names:
   0: len
   1: print
Variable names:
   0: args
   1: nargs
</code></pre>
<h3 id="inspect"><a class="markdownIt-Anchor" href="#inspect"></a> inspect</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查现场对象,获取一个文件内的类,函数,示例,等等</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># getnumbers() 发现对象的成员属性,,example是py文件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> example</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, data <span class="keyword">in</span> inspect.getmembers(example):</span><br><span class="line">    <span class="keyword">if</span> name.startswith(<span class="string">&#x27;__&#x27;</span>):</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125; : &#123;!r&#125;&#x27;</span>.<span class="built_in">format</span>(name, data))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="模块和包"><a class="markdownIt-Anchor" href="#模块和包"></a> 模块和包</h2>
<h3 id="importlib"><a class="markdownIt-Anchor" href="#importlib"></a> importlib</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行时import</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">├── clazz</span></span><br><span class="line"><span class="string">│   ├── __init__.py</span></span><br><span class="line"><span class="string">│   ├── a.py</span></span><br><span class="line"><span class="string">│   └── b.py</span></span><br><span class="line"><span class="string">└── main.py</span></span><br><span class="line"><span class="string">a.py</span></span><br><span class="line"><span class="string">def show():</span></span><br><span class="line"><span class="string">    print(&quot;show A&quot;)</span></span><br><span class="line"><span class="string">b.py</span></span><br><span class="line"><span class="string">def show():</span></span><br><span class="line"><span class="string">    print(&quot;show B&quot;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_modules</span>(<span class="params">package=<span class="string">&quot;.&quot;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    获取包名下所有非__init__的模块名</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    modules = []</span><br><span class="line">    files = os.listdir(package)</span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> file.startswith(<span class="string">&quot;__&quot;</span>):</span><br><span class="line">            name, ext = os.path.splitext(file)</span><br><span class="line">            modules.append(<span class="string">&quot;.&quot;</span> + name)</span><br><span class="line">    <span class="keyword">return</span> modules</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    package = <span class="string">&quot;clazz&quot;</span></span><br><span class="line">    modules = get_modules(package)</span><br><span class="line">    <span class="comment"># 将包下的所有模块，逐个导入，并调用其中的函数</span></span><br><span class="line">    <span class="keyword">for</span> module <span class="keyword">in</span> modules:</span><br><span class="line">        module = importlib.import_module(module, package)</span><br><span class="line">        <span class="keyword">for</span> attr <span class="keyword">in</span> <span class="built_in">dir</span>(module):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> attr.startswith(<span class="string">&quot;__&quot;</span>):</span><br><span class="line">                func = <span class="built_in">getattr</span>(module, attr)</span><br><span class="line">                func()</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    show A</span></span><br><span class="line"><span class="string">    show B</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="pkgutil"><a class="markdownIt-Anchor" href="#pkgutil"></a> pkgutil</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pkgutil</span><br><span class="line"></span><br><span class="line"><span class="comment"># 包扩展工具</span></span><br><span class="line"><span class="comment"># 一个.py文件就是一个python模块（module），如果一个目录下面有一个__init__.py文件，那么这个目录就是一个python包（package）</span></span><br><span class="line"><span class="comment"># 实际上包是一种特殊的模块，而任何定义了__path__属性的模块都被当做包。</span></span><br><span class="line"></span><br><span class="line">iter_modules(path=<span class="literal">None</span>, prefix=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># path是包的目录路径，prefix是输出时，所有包的名字的前缀。用来获取该path下的子模块或子包。</span></span><br><span class="line">walk_packages(path=<span class="literal">None</span>, prefix=<span class="string">&#x27;&#x27;</span>, onerror=<span class="literal">None</span>)</span><br><span class="line"><span class="comment"># 同上，但是这个方法是递归获取路径下的所有模块。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, name, ispkg <span class="keyword">in</span> pkgutil.walk_packages(test.__path__, test.__name__ + <span class="string">&quot;.&quot;</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;name: &#123;0:12&#125;, is_sub_package: &#123;1&#125;&quot;</span>.<span class="built_in">format</span>(name, ispkg)</span><br></pre></td></tr></table></figure>
<h3 id="zipimport"><a class="markdownIt-Anchor" href="#zipimport"></a> zipimport</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipimport</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从zip文档中导入包</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://gladdduck.github.io/2023/04/02/python3lib-3/" title="python标准库-3" target="_blank" rel="external">https://gladdduck.github.io/2023/04/02/python3lib-3/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/gladdduck" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/icon.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/gladdduck" target="_blank"><span class="text-dark">Gladdduck</span><small class="ml-1x">KB Master</small></a></h3>
        <div>我写的个人简介。</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
           
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2023/04/03/%E7%AE%97%E6%B3%95%E5%88%B7%E9%A2%98%E6%9D%82%E9%A2%98/" title="算法刷题杂题"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2023/03/30/python3lib-2/" title="python标准库-2"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn " data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">    <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat" data-mobile-sites="weibo,qq,wechat"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/donate.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/donate.png" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/gladdduck" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <!-- <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> -->
  <script src="//cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: '644a1091cfd20b8f33ef',
    clientSecret: '4c5cc91dbfe067c804fcef958817d41acc9ba545',
    repo: 'gladdduck.github.io',
    owner: 'gladdduck',
    admin: ['gladdduck'],
    id: md5(location.pathname),
    distractionFreeMode: true,
    language: 'zh-CN',
    enableHotKey: ''
  })
  gitalk.render('comments')
  </script>
      







</body>
</html>